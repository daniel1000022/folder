!function(){var n={292:function(e,a,t){function n(){var e;try{e=a.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(a=e.exports=t(765)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+a.humanize(this.diff),!t)return;t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)},a.save=function(e){try{null==e?a.storage.removeItem("debug"):a.storage.debug=e}catch(e){}},a.load=n,a.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},a.enable(n())},765:function(e,l,t){var s;function n(e){function i(){if(i.enabled){var r=i,e=+new Date,t=e-(s||e);r.diff=t,r.prev=s,r.curr=e,s=e;for(var a=new Array(arguments.length),n=0;n<a.length;n++)a[n]=arguments[n];a[0]=l.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var o=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;o++;var n=l.formatters[t];return"function"==typeof n&&(t=a[o],e=n.call(r,t),a.splice(o,1),o--),e}),l.formatArgs.call(r,a),(i.log||l.log||console.log.bind(console)).apply(r,a)}}return i.namespace=e,i.enabled=l.enabled(e),i.useColors=l.useColors(),i.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return l.colors[Math.abs(n)%l.colors.length]}(e),"function"==typeof l.init&&l.init(i),i}(l=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},l.disable=function(){l.enable("")},l.enable=function(e){l.save(e),l.names=[],l.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+e.substr(1)+"$")):l.names.push(new RegExp("^"+e+"$")))},l.enabled=function(e){var t,n;for(t=0,n=l.skips.length;t<n;t++)if(l.skips[t].test(e))return!1;for(t=0,n=l.names.length;t<n;t++)if(l.names[t].test(e))return!0;return!1},l.humanize=t(628),l.names=[],l.skips=[],l.formatters={}},204:function(e){function o(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function i(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,n){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof t&&(n=t,t={}),t=t||{},n=n||function(){},a.type=t.type||"text/javascript",a.charset=t.charset||"utf8",a.async=!("async"in t)||!!t.async,a.src=e,t.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,t.attrs),t.text&&(a.text=""+t.text),("onload"in a?o:i)(a,n),a.onload||o(a,n),r.appendChild(a)}},628:function(e){var r=36e5,a=864e5;function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return function(e){if(100<(e=String(e)).length)return;e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!e)return;var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"days":case"day":case"d":return t*a;case"hours":case"hour":case"hrs":case"hr":case"h":return t*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}(e);if("number"==n&&!1===isNaN(e))return t.long?o(t=e,a,"day")||o(t,r,"hour")||o(t,6e4,"minute")||o(t,1e3,"second")||t+" ms":function(e){if(a<=e)return Math.round(e/a)+"d";if(r<=e)return Math.round(e/r)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},438:function(e){"use strict";var
/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/
t=function(){var e={},a={};return e.on=function(e,t){t={name:e,handler:t};return a[e]=a[e]||[],a[e].unshift(t),t},e.off=function(e){var t=a[e.name].indexOf(e);-1!==t&&a[e.name].splice(t,1)},e.trigger=function(e,t){var n,r=a[e];if(r)for(n=r.length;n--;)r[n].handler(t)},e};e.exports=t},771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(606),n=(r=a)&&r.__esModule?r:{default:r};t.default={pauseVideo:{acceptableStates:[n.default.ENDED,n.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[n.default.ENDED,n.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[n.default.ENDED,n.default.PLAYING,n.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},368:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(292)),s=a(n(376)),l=a(n(645)),u=a(n(771));function a(e){return e&&e.__esModule?e:{default:e}}var c=(0,r.default)("youtube-player"),r={};r.proxyEvents=function(r){var e={},t=!0,n=!1,a=void 0;try{for(var o,i=l.default[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)!function(t){var n="on"+t.slice(0,1).toUpperCase()+t.slice(1);e[n]=function(e){c('event "%s"',n,e),r.trigger(t,e)}}(o.value)}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}return e},r.promisifyPlayer=function(a){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t={},n=!0,r=!1,o=void 0;try{for(var i,l=s.default[Symbol.iterator]();!(n=(i=l.next()).done);n=!0)!function(r){e&&u.default[r]?t[r]=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return a.then(function(a){var o=u.default[r],e=a.getPlayerState(),t=a[r].apply(a,n);return o.stateChangeRequired||Array.isArray(o.acceptableStates)&&-1===o.acceptableStates.indexOf(e)?new Promise(function(n){function r(){var e=a.getPlayerState(),t=void 0;"number"==typeof o.timeout&&(t=setTimeout(function(){a.removeEventListener("onStateChange",r),n()},o.timeout)),Array.isArray(o.acceptableStates)&&-1!==o.acceptableStates.indexOf(e)&&(a.removeEventListener("onStateChange",r),clearTimeout(t),n())}a.addEventListener("onStateChange",r)}).then(function(){return t}):t})}:t[r]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.then(function(e){return e[r].apply(e,t)})}}(i.value)}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return t},t.default=r,e.exports=t.default},606:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},645:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},376:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=r(n(438)),s=r(n(341)),u=r(n(368));function r(e){return e&&e.__esModule?e:{default:e}}var c=void 0;t.default=function(r){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=(0,l.default)();if(c=c||(0,s.default)(o),a.events)throw new Error("Event handlers cannot be overwritten.");if("string"==typeof r&&!document.getElementById(r))throw new Error('Element "'+r+'" does not exist.');a.events=u.default.proxyEvents(o);var t=new Promise(function(n){"object"===(void 0===r?"undefined":i(r))&&r.playVideo instanceof Function?n(r):c.then(function(e){var t=new e.Player(r,a);return o.on("ready",function(){n(t)}),null})}),e=u.default.promisifyPlayer(t,e);return e.on=o.on,e.off=o.off,e},e.exports=t.default},341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(204),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(r){return new Promise(function(e){var t,n;window.YT&&window.YT.Player&&window.YT.Player instanceof Function?e(window.YT):(t="http:"===window.location.protocol?"http:":"https:",(0,o.default)(t+"//www.youtube.com/iframe_api",function(e){e&&r.trigger("error",e)}),n=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=function(){n&&n(),e(window.YT)})})},e.exports=t.default},779:function(e,t){var n;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
!function(){"use strict";var i={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r,a=typeof n;if("string"==a||"number"==a)e.push(n);else if(Array.isArray(n))!n.length||(r=l.apply(null,n))&&e.push(r);else if("object"==a)if(n.toString===Object.prototype.toString||n.toString.toString().includes("[native code]"))for(var o in n)i.call(n,o)&&n[o]&&e.push(o);else e.push(n.toString())}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}()}},r={};function go(e){if(r[e])return r[e].exports;var t=r[e]={exports:{}};return n[e](t,t.exports,go),t.exports}go.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return go.d(t,{a:t}),t},go.d=function(e,t){for(var n in t)go.o(t,n)&&!go.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},go.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var c,f,n,d=CoreUtilities,ee=React,te=go.n(ee),e=ReactDOM,y=go.n(e),m=ReactRouterDOM,t=ReactUtilities,r={common:["CommonUI.Features","Common.GameSorts"],feature:"Feature.GamePage"},a=r,P=ReactStyleGuide,p=Roblox,o=p.EnvironmentUrls.apiGatewayUrl,i={getExperimentationValues:function(e,t,n){return{url:o+"/product-experimentation-platform/v1/projects/"+e+"/layers/"+t+"/values?parameters="+n.join(","),withCredentials:!0}}},l={homePage:{},homePageWeb:{},serverTab:{ShouldDisableJoinButtonForFullServers:!1},gameDetails:{ShouldHidePrivateServersInAboutTab:!1},searchPage:{ShouldUseOmniSearchAPI:!1},discoverPage:{IsGamesOmniFeedEnabled:!1}},s={homePage:"PlayerApp.HomePage.UX",homePageWeb:"Website.Homepage",serverTab:"GameDetails.ServersTab",gameDetails:"Website.GameDetails",searchPage:"Website.SearchResultsPage",discoverPage:"Website.GamesPage"},u={url:{getOmniRecommendations:{url:(q=p.EnvironmentUrls.apiGatewayUrl)+"/discovery-api/omni-recommendation",withCredentials:!0},getOmniRecommendationsMetadata:{url:q+"/discovery-api/omni-recommendation-metadata",withCredentials:!0},getOmniSearch:{url:q+"/search-api/omni-search",withCredentials:!0},getExploreSorts:{url:q+"/explore-api/v1/get-sorts",withCredentials:!0},getExploreSortContents:{url:q+"/explore-api/v1/get-sort-content",withCredentials:!0}}};function g(e){e instanceof SyntaxError&&window.sessionStorage.removeItem(A)}function ne(n,r){void 0===r&&(r=!1);var e=(0,ee.useState)(j([n])[n]),t=e[0],a=e[1];return(0,ee.useEffect)(function(){var e,t;r&&(t=d.uuidService.generateRandomUuid(),L(((e={})[n]=t,e)),a(t))},[n,r]),t}function I(e,n){return e.filter(function(e){var t;return(null===(t=e.presence)||void 0===t?void 0:t.universeId)===n&&(null===(e=e.presence)||void 0===e?void 0:e.userPresenceType)===p.Presence.PresenceTypes.InGame})}function v(e,t){var n=0;if(!Number.isNaN(e)&&!Number.isNaN(t)){if(0===e&&0===t)return;n=0===e&&0!==t?0:0!==e&&0===t||100<(n=Math.floor(e/(e+t)*100))?100:n}return n}function h(e){return-1===e?"--":d.abbreviateNumber.getAbbreviatedValue(e)}function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function S(n){return Object.keys(n).reduce(function(e,t){return"object"==typeof n[t]&&n[t]&&(e[t]=JSON.stringify(n[t])),"number"==typeof n[t]&&(e[t]=n[t]),"string"==typeof n[t]&&(e[t]=encodeURIComponent(n[t])),"boolean"==typeof n[t]&&(e[t]=n[t]?1:0),e},{})}function E(e){return(e=d.urlService.composeQueryString(e))?"?"+e:""}function re(t,e){var n;return e.some(function(e){return null===(e=t[e])||void 0===e?void 0:e.isSponsored})?((n={})[oe.AdsPositions]=e.map(function(e){return t[e].isSponsored?1:0}),n[oe.AdFlags]=e.map(function(e){return t[e].isSponsored?1:0}),n[oe.AdIds]=e.map(function(e){return(null===(e=t[e])||void 0===e?void 0:e.nativeAdData)||"0"}),n):{}}(B={}).Game="Game",B.CatalogAsset="CatalogAsset",B.CatalogBundle="CatalogBundle",(H=c=c||{}).Carousel="Carousel",H.AvatarCarousel="AvatarCarousel",H.SortlessGrid="SortlessGrid",(V={}).Sponsored="Sponsored",V.SponsoredGame="SponsoredGame",(q=f=f||{}).AppGameTileNoMetadata="AppGameTileNoMetadata",q.GridTile="GridTile",(B=n=n||{}).Always="Always",B.Hover="Hover";var w,T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},N=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},x=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},C=function(r,a,o){return void 0===o&&(o=1),N(void 0,void 0,Promise,function(){var n,t;return x(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,d.httpService.get(i.getExperimentationValues(o,r,Object.keys(a)))];case 1:return n=e.sent().data,t=Object.keys(n).reduce(function(e,t){return null!==n[t]&&(e[t]=n[t]),e},{}),[2,T(T({},a),t)];case 2:return e.sent(),[2,a];case 3:return[2]}})})},O=function(r,a){return N(void 0,void 0,Promise,function(){var t,n;return x(this,function(e){switch(e.label){case 0:return t={pageType:r,sessionId:a||d.uuidService.generateRandomUuid(),supportedTreatmentTypes:[c.SortlessGrid]},[4,d.httpService.post(u.url.getOmniRecommendations,t)];case 1:return n=e.sent().data,Object.keys(n.contentMetadata.Game).forEach(function(e){e=n.contentMetadata.Game[e];e.placeId=e.rootPlaceId}),[2,n]}})})},R=function(n,r){return N(void 0,void 0,Promise,function(){var t;return x(this,function(e){switch(e.label){case 0:return[4,d.httpService.post(u.url.getOmniRecommendationsMetadata,{contents:n,sessionId:r||d.uuidService.generateRandomUuid()})];case 1:return t=e.sent().data,Object.keys(t.contentMetadata.Game).forEach(function(e){e=t.contentMetadata.Game[e];e.placeId=e.rootPlaceId}),[2,t]}})})},D=function(e,t){return d.httpService.get(u.url.getExploreSorts,{sessionId:e||d.uuidService.generateRandomUuid(),sortsPageToken:t}).then(function(e){return e.data})},k=function(e,t,n){return d.httpService.get(u.url.getExploreSortContents,{sessionId:e||d.uuidService.generateRandomUuid(),sortId:t,pageToken:n}).then(function(e){return e.data})},G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},A="eventTracker",L=function(e){try{var t=JSON.parse(window.sessionStorage.getItem(A)||"{}"),t=G(G({},t),e);return window.sessionStorage.setItem(A,JSON.stringify(t)),!0}catch(e){return g(e),!1}},j=function(e){try{var n=JSON.parse(window.sessionStorage.getItem(A)||"{}");return e.reduce(function(e,t){return e[t]=n[t],e},{})}catch(e){return g(e),{}}},M=ne,U=CoreRobloxUtilities,F=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},H=(new p.Intl).getDateTimeFormatter(),V=d.urlService.parseQueryString,q=d.abbreviateNumber.getAbbreviatedValue,B=d.numberFormat.getNumberFormat,z={capitalize:b,humanizeCamelCase:function(e){var t=e.split(/([A-Z][a-z]*)/g);return 1===t.length?e:b(t.filter(function(e){return 0!==e.length}).join(" "))},parseEventParams:S,getInGameFriends:I,getVotePercentageValue:v,getVotePercentage:function(e,t){t=v(e,t);return void 0!==t?t+"%":void 0},getPlayerCount:h,getGearIconName:function(e){return{PowerUps:"PowerUp",Music:"Musical",PersonalTransport:"Transport"}[e]||e},getNumberFormat:B,getAbbreviatedValue:q,dateTimeFormatter:H,parseQueryString:V,composeQueryString:E,getSponsoredAdImpressionsData:re,calculateImpressedIndexes:function(e,n){if(void 0===e)return Array.from(new Array(n[1]-n[0]+1),function(e,t){return t+n[0]});var r=n[0]<e[0]?[n[0],e[0]]:void 0,a=n[1]>e[1]?[e[1],n[1]]:void 0,t=r?new Array(r[1]-r[0]).fill(0).map(function(e,t){return t+r[0]}):[],e=a?new Array(a[1]-a[0]).fill(0).map(function(e,t){return t+a[0]+1}):[];return F(F([],t),e)},splitArray:function(n,r){if(0===n.length||0===r)return[n];var e=Math.ceil(n.length/r);return new Array(e).fill(0).map(function(e,t){return n.slice(t*r,(t+1)*r)})},GAME_STATS_PLACEHOLDER_STRING:"--"},_="robloxAttributionIds";function W(e){var t=window,n=t[_];return n||(n={},t[_]=n),(t=n[e])||(t=d.uuidService.generateRandomUuid(),n[e]=t),t}(w=w||{}).GameDetailReferral="gameDetailReferral";var ae,Y=function(e){return"games#/sortName/"+e},Q=function(e){return"games#/sortName/v2/"+e};function K(e,t,n){return void 0===n&&(n={}),d.urlService.getUrlWithQueries(U.entityUrl.game.getRelativePath(e)+"/"+d.seoName.formatSeoName(t),n)}function $(e,t,n){return void 0===n&&(n={}),t=function(e,t){var n=encodeURIComponent(e);switch(t){case ae.HomePage:return Q(n);case ae.GamesPage:return Y(n);default:return Q(n)}}(e,t),d.urlService.getUrlWithQueries(t,n)}function J(){return document.referrer}(B=ae=ae||{}).SearchPage="searchPage",B.SortDetailPageDiscover="sortDetailPageDiscover",B.SortDetailPageHome="sortDetailPageHome",B.GameDetailPage="gameDetailPage",B.GamesPage="gamesPage",B.HomePage="homePage",B.PeopleListInHomePage="peopleListInHomePage";var oe,Z,ie,X=K,le=function(){return(le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},se=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},ue=(q=U.eventStreamService.eventTypes).pageLoad,ce=q.formInteraction;(H=oe=oe||{}).AbsPositions="absPositions",H.AdsPositions="adsPositions",H.AdFlags="adFlags",H.Algorithm="algorithm",H.AttributionId="attributionId",H.HttpReferrer="httpReferrer",H.EmphasisFlag="emphasisFlag",H.GameSetTargetId="gameSetTargetId",H.GameSetTypeId="gameSetTypeId",H.IsAd="isAd",H.NativeAdData="nativeAdData",H.AdIds="adIds",H.NumberOfLoadedTiles="numberOfLoadedTiles",H.Page="page",H.PlaceId="placeId",H.Position="position",H.RootPlaceIds="rootPlaceIds",H.SortId="sortId",H.SortPos="sortPos",H.SuggestionKwd="suggestionKwd",H.SuggestionReplacedKwd="suggestionReplacedKwd",H.SuggestionCorrectedKwd="suggestionCorrectedKwd",H.SuggestionAlgorithm="suggestionAlgorithm",H.Topics="topics",H.TreatmentType="treatmentType",H.UniverseId="universeId",H.UniverseIds="universeIds",H.FriendId="friendId",(V=Z=Z||{}).GameImpressions="gameImpressions",V.GameDetailReferral="gameDetailReferral",V.SortDetailReferral="sortDetailReferral",(B=ie=ie||{}).HomePageSessionInfo="homePageSessionInfo",B.GameSearchSessionInfo="gameSearchSessionInfo",B.DiscoverPageSessionInfo="discoverPageSessionInfo";var de=((q={})[Z.GameImpressions]=function(e){e=se(e,[]);return[{name:Z.GameImpressions,type:Z.GameImpressions,context:ce},S(le({},e))]},q[Z.GameDetailReferral]=function(e){var t;return void 0===e&&(e={}),[{name:Z.GameDetailReferral,type:Z.GameDetailReferral,context:ue},S(le(((t={})[oe.AttributionId]=W(w.GameDetailReferral),t[oe.HttpReferrer]=J(),t),e))]},q[Z.SortDetailReferral]=function(e){return void 0===e&&(e={}),[{name:Z.SortDetailReferral,type:Z.SortDetailReferral,context:ue},S(le({},e))]},q),me={LabelSponsoredAd:"Label.SponsoredAd",LabelNoSearchResults:"LabelNoSearchResults",LabelPlayingOnePlusUsersWithComma:"LabelPlayingOnePlusUsersWithComma",LabelPlayingOneUser:"LabelPlayingOneUser",LabelBy:"LabelCreatorBy",LabelByPrefix:"Label.By"},fe={LabelApiError:"Label.ApiError",LabelGames:"Label.Games"},pe={ActionSeeAll:"Action.SeeAll"},H=go(779),ge=go.n(H),ve=P.Button.variants;(V=function(e){var t=e.errorMessage,n=e.onRefresh,e=e.className;return te().createElement("div",{"data-testid":"error-status",className:ge()("game-error",e)},te().createElement("span",{className:"icon-spot-error-2xl"}),te().createElement("p",{className:"text-label error-text"},t),te().createElement(P.Button,{className:"refresh-button",variant:ve.control,onClick:n},te().createElement("span",{className:"icon-common-refresh"})))}).defaultProps={className:""};var ye=V,he=HeaderScripts,be=p.EnvironmentUrls.gamesApi,Ie={url:{getOmniRecommendations:function(e,t){return{url:be+"/v1/games/omni-recommendations?model.pageType="+e+(void 0!==t?"&model.sessionId="+t:""),withCredentials:!0}},getOmniRecommendationsMetadata:{url:be+"/v1/games/omni-recommendations-metadata",withCredentials:!0},getGameList:{url:be+"/v1/games/list",withCredentials:!0},getGamePasses:function(e,t){return{url:d.urlService.getAbsoluteUrl("/Games/GetGamePassesPaged?placeId="+e+"&startIndex=0&maxRows="+t),withCredentials:!0}},getGameRecommendations:function(e){return{url:be+"/v1/games/recommendations/game/"+e,withCredentials:!0}},getGameSorts:{url:be+"/v1/games/sorts",withCredentials:!0},getUniverseVoiceStatus:function(e){return{withCredentials:!0,url:p.EnvironmentUrls.voiceApi+"/v1/settings/universe/"+e}},getVoiceOptInStatus:{withCredentials:!0,url:p.EnvironmentUrls.voiceApi+"/v1/settings/user-opt-in"}},defaultCacheCriteria:{refreshCache:!1,expirationWindowMS:3e4,useCache:!0}},Se=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},Pe=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ee=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},we=Ie.url,Te=Ie.defaultCacheCriteria,Ne=U.dataStores.gamesDataStore,xe=U.dataStores.userDataStoreV2,Ce=U.dataStores.userDataStore.FriendsUserSortType,Oe=function(){return xe.getFriends({userId:null===he.authenticatedUser||void 0===he.authenticatedUser?void 0:he.authenticatedUser.id,userSort:Ce.StatusFrequents,isGuest:!1},Te)},Re=function(r,a,o,i,l,s){return Se(void 0,void 0,Promise,function(){var t,n;return Pe(this,function(e){switch(e.label){case 0:return[4,d.httpService.get(we.getGameList,{sortToken:r,gameSetTargetId:l,contextCountryRegionId:a,exclusiveStartId:s,startRows:o,maxRows:i})];case 1:return n=e.sent().data,t=n.games,t=void 0===t?[]:t,n=Ee(n,["games"]),[2,{games:t,metaData:n}]}})})},De=function(){return Se(void 0,void 0,Promise,function(){return Pe(this,function(e){switch(e.label){case 0:return[4,d.httpService.get(Ie.url.getGameSorts,{gameSortsContext:"GamesDefaultSorts"})];case 1:return[2,{sorts:e.sent().data.sorts}]}})})},ke=function(n){return Se(void 0,void 0,Promise,function(){var t;return Pe(this,function(e){switch(e.label){case 0:return[4,Ne.getPlaceDetails([n])];case 1:return t=e.sent().data,[2,(void 0===t?[]:t)[0]]}})})},Ge=RobloxThumbnails,Ae={maxTilesPerCarouselPage:6,maxGridTilesPerCarouselPage:4,minGridTilesPerCarouselPage:2,gameTileWidth:150,homeFeedMaxWidth:970,gridTileTilesPerRowBreakpointWidth:738,sortlessGridMaxTilesMetadataToFetch:300},Le={maxTilesInGameImpressionsEvent:25,gameImpressionsIntersectionThreshold:.5,numberOfInGameAvatarIcons:3,numberOfInGameNames:1,maxFacepileFriendCountValue:99,numberOfGameTilesPerLoad:60,numberOfGamePassesPerLoad:50,keyBoardEventCode:{enter:"Enter"},RatingPercentageText:"Label.RatingPercentage"},je=.1,Me=Ae,B={numGameCarouselLookAheadWindows:3},q=PropTypes,Ue=4,Fe="Label.ContextMenuTitle",He="Action.ViewDetails",Ve="Action.JoinGame",qe={goToProfileInPlacesList:{name:"goToProfileInPlacesList",ctx:"click"},openModalFromGameTile:{name:"openModalFromGameTile",ctx:"click"},goToChatInPlacesList:{name:"goToChatInPlacesList",ctx:"click"},joinGameInPlacesList:{name:"joinGameInPlacesList",ctx:"click"},goToGameDetailInPlacesList:{name:"goToGameDetailInPlacesList",ctx:"click"},gamePlayIntentInPlacesList:{ctx:"placesListInHomePage"}};function Be(e){var t=e.game,n=e.translate,r=t.universeId,a=t.name,e=t.referralUrl,t=t.isPlayable,r=te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.gameIcon,size:Ge.DefaultThumbnailSize,targetId:r,imgClassName:"game-card-thumb",format:Ge.ThumbnailFormat.jpeg});return te().createElement("div",{className:"border-bottom player-interaction-container"},te().createElement("span",{className:"cursor-pointer game-icon"},te().createElement(P.Link,{url:e,className:"game-card-link"},r)),te().createElement("span",{className:"game-info-container"},te().createElement(P.Link,{url:e,className:"game-name"},a),!t&&te().createElement(P.Link,{url:e,className:"btn-control-sm game-link"},n(He))))}Be.propTypes={game:(H=go.n(q))().shape({universeId:H().number,placeId:H().number,name:H().string,playerCount:H().number,isShowSponsoredLabel:H().bool,nativeAdData:H().string,imageUrl:H().string,referralUrl:H().string,isPlayable:H().bool}).isRequired,translate:H().func.isRequired};var ze=Be;function _e(e){var t=e.playerId,e=e.altName;return te().createElement("div",{className:"avatar-card-link"},te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.avatarHeadshot,size:Ge.ThumbnailAvatarHeadshotSize.size48,targetId:t,imgClassName:"avatar-card-image",format:Ge.ThumbnailFormat.png,altName:e}))}_e.defaultProps={altName:""},_e.propTypes={playerId:H().number.isRequired,altName:H().string};var We=_e;function Ye(e){var t=e.playerData,o=e.dismissModal,n=e.isPlayable,r=e.translate,e=t.presence,i=e.rootPlaceId,l=e.placeId,s=e.gameId,u=t.id,t=t.nameForDisplay;return te().createElement("div",{className:"border-bottom player-info"},te().createElement("span",{className:"player-name"},t),te().createElement(P.Button,{className:"cursor-pointer btn-primary-sm player-action",onClick:function(e){var t={rootPlaceId:i,placeId:l},n=U.playGameService.buildPlayGameProperties(i,l,s,u),r=qe.joinGameInPlacesList,a=qe.gamePlayIntentInPlacesList,a={eventName:r.name,ctx:r.ctx,properties:t,gamePlayIntentEventCtx:a.ctx};U.playGameService.launchGame(n,a),o(e)},isDisabled:!n},r(Ve)))}Ye.propTypes={playerData:H().shape({presence:H().shape({rootPlaceId:H().number,placeId:H().number,gameId:H().string}),id:H().number,nameForDisplay:H().string}).isRequired,dismissModal:H().func.isRequired,isPlayable:H().bool.isRequired,translate:H().func.isRequired};var Qe=Ye;function Ke(e){var t=e.friendsData,n=e.friendsInGame,a=e.dismissModal,o=e.isPlayable,i=e.translate,l={};return t.forEach(function(e){l[e.id]=e}),te().createElement("div",{className:"interaction-container"},te().createElement("ul",{className:"interaction-list"},n.map(function(e,t){var n=e+t,r=l[e],t=r.id,e=r.nameForDisplay;return te().createElement("li",{key:n,className:"interaction-item","aria-hidden":"true"},te().createElement("span",{className:"avatar avatar-headshot avatar-headshot-sm player-avatar"},te().createElement(We,{playerId:t,altName:e})),te().createElement(Qe,{playerData:r,dismissModal:a,isPlayable:o,translate:i}))})))}Ke.propTypes={friendsData:H().arrayOf(H().shape({presense:H().shape({rootPlaceId:H().number,placeId:H().number,gameId:H().string}),id:H().number,nameForDisplay:H().string})).isRequired,friendsInGame:H().arrayOf(H().number).isRequired,dismissModal:H().func.isRequired,isPlayable:H().bool.isRequired,translate:H().func.isRequired};var $e=Ke;function Je(e){var t=e.friendsData,n=e.friendsInGame,r=e.game,a=e.dismissModal,o=e.translate,e=o(Fe);return te().createElement("div",{"data-testid":"game-players-player-interaction-modal"},te().createElement(P.Modal.Header,{title:e,onClose:a}),te().createElement(ze,{game:r,translate:o}),te().createElement($e,{friendsData:t,friendsInGame:n,dismissModal:a,isPlayable:r.isPlayable,translate:o}))}function Ze(e){var t=e.id,n=e.children,r=e.gameData,a=e.isVisible,o=e.page,e=e.buildEventProperties;return te().createElement(P.Link,{url:X(r.placeId,r.name,e(r,t)),tabIndex:a?0:-1,"aria-hidden":!a,className:"game-card-link",id:r.universeId.toString()},o===ae.GamesPage?te().createElement("div",{className:"game-card-thumb-container"},te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.gameIcon,size:Ge.ThumbnailGameIconSize.size150,targetId:r.universeId,containerClass:"game-card-thumb",format:Ge.ThumbnailFormat.jpeg,altName:r.name})):te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.gameIcon,size:Ge.ThumbnailGameIconSize.size150,targetId:r.universeId,containerClass:"game-card-thumb-container",format:Ge.ThumbnailFormat.jpeg,altName:r.name}),te().createElement("div",{className:"game-card-name game-name-title",title:r.name},r.name),n)}Je.propTypes={friendsData:H().arrayOf(H().shape({presense:H().shape({rootPlaceId:H().number,placeId:H().number,gameId:H().string}),id:H().number,nameForDisplay:H().string})).isRequired,friendsInGame:H().arrayOf(H().number).isRequired,game:H().shape({universeId:H().number,placeId:H().number,name:H().string,playerCount:H().number,isShowSponsoredLabel:H().bool,nativeAdData:H().string,imageUrl:H().string,referralUrl:H().string,isPlayable:H().bool}).isRequired,dismissModal:H().func.isRequired,translate:H().func.isRequired};var Xe=Je,V={common:["Common.GameSorts"],feature:"Feature.PlacesList"},et=function(){return(et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},tt=Le.keyBoardEventCode,nt=Le.numberOfInGameAvatarIcons,rt=Le.numberOfInGameNames;function at(e){var t=e.totalDownVotes,n=e.totalUpVotes,e=e.playerCount,t=z.getVotePercentage(n,t),e=z.getPlayerCount(e);return te().createElement("div",{className:"game-card-info","data-testid":"game-tile-stats"},te().createElement("span",{className:"info-label icon-votes-gray"}),t?te().createElement("span",{className:"info-label vote-percentage-label"},t):te().createElement("span",{className:"info-label no-vote"}),te().createElement("span",{className:"info-label icon-playing-counts-gray"}),te().createElement("span",{className:"info-label playing-counts-label"},e))}function ot(e){return e=e.playerCount,e=z.getPlayerCount(e),te().createElement("div",{className:"game-card-info","data-testid":"game-tile-stats-player-count"},te().createElement("span",{className:"info-label icon-playing-counts-gray"}),te().createElement("span",{className:"info-label playing-counts-label"},e))}function it(e){var t=e.playerCount,e=e.playerCountStyle,e=ge()("game-card-image-pill",{"hover-only":e===n.Hover});return te().createElement("div",{className:e,"data-testid":"game-tile-player-count-pill"},te().createElement(ot,{playerCount:t}))}function lt(e){var t=e.totalDownVotes,n=e.totalUpVotes,r=e.translate,e=Le.RatingPercentageText,t=(null==(t=z.getVotePercentageValue(n,t))?void 0:t.toString())||"--";return te().createElement("div",{className:"game-card-info","data-testid":"game-tile-stats-rating"},te().createElement("span",{className:"info-label icon-votes-gray"}),te().createElement("span",{className:"info-label vote-percentage-label"},r(e,{percentRating:t})||t+"% Rating"))}function st(e){var t=e.iconClassName,e=e.text;return te().createElement("div",{className:"game-card-info","data-testid":"game-tile-stats-icon-text-footer"},te().createElement("span",{className:ge()("info-label",t)}),te().createElement("span",{className:"info-label text-label-with-icon"},e))}function ut(e){return e=e.footerText,te().createElement("div",{className:"game-card-info","data-testid":"game-tile-stats-friend-activity"},te().createElement("span",{className:"info-label"},e))}function ct(e){return e=e.user,te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.avatarHeadshot,size:Ge.ThumbnailAvatarHeadshotSize.size48,targetId:e.id,containerClass:"avatar avatar-headshot avatar-headshot-xs",imgClassName:"avatar-card-image",format:Ge.ThumbnailFormat.png,altName:e.displayName})}function dt(e){var t=e.friendsData,n=e.isOnline,r=Le.maxFacepileFriendCountValue,r=(null==t?void 0:t.length)>r?r.toString()+"+":(null==t?void 0:t.length)>nt?null==t?void 0:t.length.toString():"",e=r?nt-1:nt,a=ge()("avatar-card",{"avatar-card-online":n});return te().createElement("div",{className:"info-avatar"},r&&te().createElement("div",{className:a},te().createElement("div",{className:"avatar-count-container"},te().createElement("span",{className:"avatar-count info-label"},r))),t.slice(0,e).map(function(e){return te().createElement("div",{className:a,key:e.displayName},te().createElement(ct,{user:e}))}))}function mt(e){var t=e.friendsData,e=e.isOnline;if(0===t.length)throw new Error("friendData should not be empty");return te().createElement("div",{className:"game-card-info","data-testid":"game-tile-stats-"+(e?"online":"offline")+"-friends-facepile"},te().createElement(dt,{friendsData:t,isOnline:e}),te().createElement("span",{className:"info-label"},t.map(function(e){return e.displayName}).join(", ")))}function ft(e){var t=e.friendData,n=e.gameData,r=e.translate,a=(0,ee.useState)(!1),e=a[0],o=a[1];if(0===t.length)throw new Error("friendData should not be empty");return te().createElement("div",{className:"game-card-friend-info game-card-info","data-testid":"game-tile-stats-friends"},te().createElement("div",{className:"info-avatar",style:{width:22*(t.slice(0,nt).length-1)+32+"px"}},t.slice(0,nt).map(function(e){return te().createElement("div",{className:"avatar-card",role:"button",tabIndex:0,key:e.displayName,onClick:function(e){e.stopPropagation(),e.preventDefault(),o(!0)},onKeyDown:function(e){e.code===tt.enter&&(e.stopPropagation(),e.preventDefault(),o(!0))}},te().createElement(ct,{user:e}))})),r&&te().createElement("span",{className:"info-label text-overflow","data-testid":"game-tile-stats-info-label"},t.length>rt?r(me.LabelPlayingOnePlusUsersWithComma,{username:t[0].displayName,count:t.length-rt}):r(me.LabelPlayingOneUser,{user:t[0].displayName})),te().createElement(pt,{friendsDataInGame:t,game:n,show:e,onHide:function(e){e.stopPropagation(),e.preventDefault(),o(!1)}}))}Ze.defaultProps={page:ae.HomePage,isVisible:!0},it.defaultProps={playerCountStyle:void 0},ft.defaultProps={translate:void 0};var pt=(0,t.withTranslations)(function(e){var t=e.show,n=e.onHide,r=e.friendsDataInGame,a=e.game,e=e.translate;return te().createElement(P.Modal,{show:t,onHide:n,size:"lg"},te().createElement(Xe,{friendsData:r.map(function(e){return et(et({},e),{nameForDisplay:e.displayName})}),friendsInGame:r.map(function(e){return e.id}),game:a,dismissModal:n,translate:e}))},V),gt=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},vt=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};(q=(0,ee.forwardRef)(function(e,t){var n=e.id,r=e.buildEventProperties,a=e.gameData,o=e.page,i=void 0===o?ae.HomePage:o,l=e.className,o=void 0===l?"grid-item-container game-card-container":l,l=e.friendData,s=void 0===l?[]:l,l=e.isVisible,l=void 0===l||l,e=e.shouldShowMetadata,u=void 0===e||e,e=(0,ee.useState)(),c=e[0],d=e[1],m=(0,ee.useMemo)(function(){return I(s,a.universeId)},[s,a.universeId]);(0,ee.useEffect)(function(){void 0===c&&0<m.length&&gt(void 0,void 0,void 0,function(){var t;return vt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ke(a.placeId.toString())];case 1:return t=e.sent(),d(t),[3,3];case 2:return t=e.sent(),console.error(t),[3,3];case 3:return[2]}})})},[m,c]);return te().createElement("div",{ref:t,className:o,"data-testid":"game-tile"},te().createElement(Ze,{id:n,isVisible:l,buildEventProperties:r,gameData:a,page:i},u?0<m.length&&c?te().createElement(ft,{friendData:m,gameData:c}):null!=a&&a.friendActivityTitle?te().createElement(ut,{footerText:a.friendActivityTitle}):te().createElement(at,{totalUpVotes:a.totalUpVotes,totalDownVotes:a.totalDownVotes,playerCount:a.playerCount}):te().createElement(te().Fragment,null)))})).displayName="GameTile";var yt=q;(V=function(e){var t=e.placeId,n=e.clientReferralUrl,r=e.buttonClassName,a=e.purchaseIconClassName,o=(0,ee.useState)(void 0),i=o[0],l=o[1],e=(0,ee.useState)(void 0),o=e[0],s=e[1];if((0,ee.useEffect)(function(){ke(t).then(function(e){return l(e)}).catch(function(){s(!0)})},[t]),void 0===i&&!o)return te().createElement(bt,null);r=ge()(r,"btn-full-width");return te().createElement(te().Fragment,null,te().createElement(P.Link,{"data-testid":"hover-tile-purchase-button",className:r,url:n||(null==i?void 0:i.url)},te().createElement("span",{className:a}),te().createElement("span",{className:"btn-text"},(null==i?void 0:i.price)||"--")," "))}).defaultProps={clientReferralUrl:""};var ht=V,bt=function(){return te().createElement("div",{className:"shimmer play-button game-card-thumb-container","data-testid":"play-button-default"})};function It(n,r){var a;return void 0===r&&(r=300),[function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(a),a=setTimeout(function(){n.apply(void 0,e)},r)},function(){clearTimeout(a)}]}(q=function(e){var t=e.universeId,n=e.placeId,r=e.playButtonEventProperties,a=e.buttonClassName,o=e.purchaseIconClassName,i=e.clientReferralUrl,l=e.shouldPurchaseNavigateToDetails,s=p.PlayButton.usePlayabilityStatus,e=p.PlayButton.PlayabilityStatuses,u=p.PlayButton.PlayButton,c=p.PlayButton.PurchaseButton,s=s(t),d=s[0],m=s[1];switch(d){case void 0:return te().createElement(bt,null);case e.GuestProhibited:case e.Playable:return te().createElement(u,{universeId:t,placeId:n,status:d,eventProperties:r,buttonClassName:a});case e.PurchaseRequired:return l?te().createElement(ht,{placeId:n,clientReferralUrl:i,purchaseIconClassName:null!=o?o:"icon-common-play",buttonClassName:null!=a?a:"btn-growth-lg play-button"}):te().createElement(c,{universeId:t,placeId:n,iconClassName:null!=o?o:"icon-common-play",refetchPlayabilityStatus:m,buttonClassName:a});case e.UniverseRootPlaceIsPrivate:return te().createElement("div",{className:null!=a?a:"btn-growth-lg play-button"},te().createElement("span",{className:"icon-status-private"}));default:return te().createElement("div",{className:null!=a?a:"btn-growth-lg play-button"},te().createElement("span",{className:"icon-status-unavailable"}))}}).defaultProps={playButtonEventProperties:{},buttonClassName:void 0,purchaseIconClassName:void 0,clientReferralUrl:void 0,shouldPurchaseNavigateToDetails:!1};var St=q;(V=te().forwardRef(function(e,t){var n=e.gameData,r=e.id,a=e.buildEventProperties,o=e.friendData,i=void 0===o?[]:o,l=e.playerCountStyle,s=e.translate,u=0===r,c=r===Me.maxGridTilesPerCarouselPage-1,d=(0,ee.useState)(!1),m=d[0],f=d[1],o=It(function(){f(!0)},100),p=o[0],g=o[1],e=It(function(){f(!1)},100),v=e[0],y=e[1],d=function(){y(),p()},o=function(){g(),v()},e=X(n.placeId,n.name,a(n,r)),e=a?X(n.placeId,n.name,a(n,r)):e,r=a(n,r),h=(0,ee.useMemo)(function(){return I(i,n.universeId)},[i,n.universeId]),b=(0,ee.useMemo)(function(){return function(e,t){if(!t)return[];var n=new Map(e.map(function(e){return[e.id,e]}));return t.map(function(e){return n.get(e.userId)}).filter(function(e){return void 0!==e})}(i,n.friendVisits)},[i,n.friendVisits]);return te().createElement("li",{className:ge()("list-item","hover-game-tile","grid-tile",{"first-tile":u},{"last-tile":c},{focused:m}),"data-testid":"grid-tile",onMouseOver:d,onMouseLeave:o,onFocus:d,onBlur:o,id:n.universeId.toString()},n.universeId&&te().createElement("div",{className:"featured-game-container game-card-container",ref:t},te().createElement(P.Link,{url:e,className:"game-card-link"},te().createElement("div",{className:"featured-game-icon-container"},te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.gameThumbnail,size:Ge.ThumbnailGameThumbnailSize.width384,targetId:n.placeId,containerClass:"brief-game-icon",format:Ge.ThumbnailFormat.jpeg,altName:n.name}),te().createElement(it,{playerCount:n.playerCount,playerCountStyle:l})),te().createElement("div",{className:"info-container"},te().createElement("div",{className:"game-card-name game-name-title",title:n.name},n.name),te().createElement("div",{className:"grid-tile-metadata"},te().createElement("div",{className:"base-metadata"},0<(null==h?void 0:h.length)?te().createElement(mt,{friendsData:h,isOnline:!0}):0<(null==b?void 0:b.length)?te().createElement(mt,{friendsData:b,isOnline:!1}):n.friendVisitedString?te().createElement(st,{iconClassName:"icon-pastname",text:n.friendVisitedString}):te().createElement(lt,{totalUpVotes:n.totalUpVotes,totalDownVotes:n.totalDownVotes,translate:s})),te().createElement("div",{className:"hover-metadata"},n.minimumAge&&n.ageRecommendationDisplayName?te().createElement("div",{className:"game-card-info","data-testid":"game-tile-hover-age-rating"},te().createElement("span",{className:"info-label"},n.ageRecommendationDisplayName)):null)))),m&&te().createElement("div",{"data-testid":"game-tile-hover-game-tile-contents",className:"game-card-contents"},te().createElement(St,{universeId:n.universeId.toString(),placeId:n.placeId.toString(),playButtonEventProperties:r,buttonClassName:"btn-growth-xs play-button",purchaseIconClassName:"icon-robux-white",clientReferralUrl:e,shouldPurchaseNavigateToDetails:!0}))))})).displayName="HoverGameTile";var Pt=V,Et=function(){return(Et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},wt=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};(q=(0,ee.forwardRef)(function(e,t){var n=e.componentType,r=wt(e,["componentType"]);switch(n){case f.AppGameTileNoMetadata:return te().createElement(yt,Et({ref:t,shouldShowMetadata:!1},r));case f.GridTile:return te().createElement(Pt,Et({ref:t},r));default:return te().createElement(yt,Et({ref:t},r))}})).displayName="GameTileTypeMap";var Tt=q,Nt=(0,ee.forwardRef)(function(e,t){var n=e.gameData,r=e.buildEventProperties,a=e.translate,o=e.friendData,i=e.componentType,l=e.playerCountStyle,s=e.tileRef,e=ge()("game-carousel",{"grid-tile-carousel":i===f.GridTile});return te().createElement("div",{"data-testid":"game-carousel",ref:t,className:e},n.map(function(e,t){return te().createElement(Tt,{componentType:i,playerCountStyle:l,ref:s,key:t,id:t,gameData:e,translate:a,buildEventProperties:r,friendData:o})}))});Nt.displayName="GameCarousel";var xt=function(t,e,n){var r=(0,ee.useState)(new Set),a=r[0],o=r[1],r=(0,ee.useState)(new Set),i=r[0],l=r[1],s=(0,ee.useRef)(null),u=(0,ee.useRef)(n);(0,ee.useEffect)(function(){u.current=n},[n]);var c=(0,ee.useCallback)(function(){z.splitArray(Array.from(i).filter(function(e){return!a.has(e)}),Le.maxTilesInGameImpressionsEvent).filter(function(e){return 0<e.length}).forEach(function(n){var e,t=u.current(n);void 0!==t&&0<(null===(e=t.absPositions)||void 0===e?void 0:e.length)&&(t=de.gameImpressions(t),U.eventStreamService.sendEvent.apply(U.eventStreamService,t),o(function(e){var t=e;return n.forEach(function(e){return t.add(e)}),t}))})},[a,i]),r=It(function(){return c()}),d=r[0],m=r[1];(0,ee.useEffect)(function(){var e,o=Array.from(null!==(e=null===(e=null==t?void 0:t.current)||void 0===e?void 0:e.children)&&void 0!==e?e:[]);return s.current=U.elementVisibilityService.observeChildrenVisibility({elements:o,threshold:Le.gameImpressionsIntersectionThreshold},function(e,t){m();var n,r,a=(n=t,r=[],e.forEach(function(t){var e;null==t||!t.isIntersecting||0<=(e=o.findIndex(function(e){return e===t.target}))&&(r.push(e),n.unobserve(t.target))}),r.sort(function(e,t){return e-t}));l(function(e){var t=e;return a.forEach(function(e){return t.add(e)}),t}),d()}),function(){null!=s&&s.current&&s.current()}},[t,e,i,d,m])},Ct=function(){return(Ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};(V=function(e){var t=e.translate,n=e.friendsPresence,r=e.gameData,a=e.sort,o=e.positionId,i=e.componentType,l=e.playerCountStyle,s=(0,ee.useRef)(null),u=(0,ee.useRef)(null),c=ne(ie.HomePageSessionInfo),e=(0,ee.useCallback)(function(e){if(void 0!==r){var t=e.filter(function(e){return e<(null==r?void 0:r.length)});return Ct(Ct(((e={})[oe.RootPlaceIds]=t.map(function(e){return r[e].placeId}),e[oe.UniverseIds]=t.map(function(e){return r[e].universeId}),e),re(r,t)),((e={})[oe.AbsPositions]=t,e[oe.SortPos]=o,e[oe.GameSetTypeId]=a.topicId,e[oe.Page]=ae.HomePage,e[ie.HomePageSessionInfo]=c,e))}},[r,c,o,a.topicId]);xt(s,r.length,e);e=$(a.topic,ae.HomePage,{position:o,sortId:a.topicId,page:ae.HomePage,treatmentType:a.treatmentType,homePageSessionInfo:c});return te().createElement(te().Fragment,null,te().createElement("div",{className:"container-header"},te().createElement("h2",null,te().createElement(P.Link,{url:e},a.topic)),te().createElement(P.Link,{url:e,className:"btn-secondary-xs see-all-link-icon btn-more"},t(pe.ActionSeeAll))),te().createElement(Nt,{ref:s,tileRef:u,gameData:r,friendData:n,buildEventProperties:function(e,t){var n={};return n[oe.PlaceId]=e.placeId,n[oe.UniverseId]=e.universeId,n[oe.IsAd]=e.isSponsored,n[oe.NativeAdData]=e.nativeAdData,n[oe.Position]=t,n[oe.SortPos]=o,n[oe.NumberOfLoadedTiles]=(r||[]).length,n[oe.GameSetTypeId]=a.topicId,n[oe.Page]=ae.HomePage,n[ie.HomePageSessionInfo]=c,n},translate:t,componentType:i,playerCountStyle:l}))}).defaultProps={componentType:void 0,playerCountStyle:void 0};var Ot=V,Rt=function(){return(Rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Dt=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},kt=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function Gt(){function r(e){(e.detail||[]).forEach(function(e){o.current[e.userId]&&(o.current[e.userId]=Rt(Rt({},o.current[e.userId]),{presence:e}))}),a(Rt({},o.current))}var e=this,t=(0,ee.useState)({}),n=t[0],a=t[1],o=(0,ee.useRef)(n);return(0,ee.useEffect)(function(){return Dt(e,void 0,void 0,function(){var t,n;return kt(this,function(e){switch(e.label){case 0:if((null==(t=he.deviceMeta.getDeviceMeta())?void 0:t.deviceType)!==he.deviceMeta.DeviceTypes.computer)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Oe()];case 2:return n=e.sent().userData,n=(n||[]).reduce(function(e,t){return e[t.id]=t,e},{}),o.current=n,a(Rt({},o.current)),document.addEventListener("Roblox.Presence.Update",r),[3,4];case 3:return n=e.sent(),console.error("useFriendsPresence failed to initialized with the error",n),[3,4];case 4:return[2]}})}),function(){document.removeEventListener("Roblox.Presence.Update",r)}},[]),Object.values(n)}function At(){var e=(0,ee.useContext)(zt);return{contentMetadata:e.contentMetadata,appendContentMetadata:e.appendContentMetadata}}function Lt(e,r){return e.map(function(e){var t=e.contentType,n=e.contentId,e=e.contentMetadata,t=null===(t=null==r?void 0:r[t])||void 0===t?void 0:t[n];if(t){n=_t({},t),e=null==e?void 0:e.EncryptedAdTrackingData;return n.isSponsored=0<(null==e?void 0:e.length),n.nativeAdData=e,n}return t}).filter(function(e){return void 0!==e})}function jt(e){return"recommendationList"in e}function Mt(e){return"games"in e}function Ut(e){if(jt(e))return e.topicLayoutData}function Ft(e,t){return jt(e)?Lt(e.recommendationList,t):Mt(e)?e.games:[]}function Ht(e){return{topic:e.sortDisplayName,topicId:e.gameSetTypeId,treatmentType:e.treatmentType,games:e.games.map(function(e){var t;return _t(_t({},e),{placeId:null!==(t=e.placeId)&&void 0!==t?t:e.rootPlaceId})}),sortId:e.sortId,gameSetTargetId:e.gameSetTargetId,contentType:e.contentType,nextPageToken:e.nextPageToken}}function Vt(e){return{sorts:e.sorts.map(Ht),nextSortsPageToken:e.nextSortsPageToken}}function qt(e){var t=function(e){if(e&&Mt(e))return e.gameSetTargetId}(e);return void 0!==t?((e={})[oe.GameSetTargetId]=t,e):{}}function Bt(e){var t=e.scrollClassNames,n=e.scrollIconClassName,r=e.scroll,e=e.isDisabled;return te().createElement("div",{"data-testid":"game-carousel-scroll-bar",className:t,onClick:r,"aria-disabled":e,onKeyDown:function(e){e.code===Wt.enter&&(e.stopPropagation(),e.preventDefault(),r())},role:"button",tabIndex:0},te().createElement("div",{className:"arrow"},te().createElement("span",{className:n})),te().createElement("div",{className:"spacer"}))}var zt=(0,ee.createContext)({contentMetadata:null,appendContentMetadata:function(){}}),_t=function(){return(_t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Wt=Le.keyBoardEventCode,Yt=B.numGameCarouselLookAheadWindows;(q=function(e){var t=e.gameData,n=e.page,r=e.gamesContainerRef,a=e.buildEventProperties,o=e.loadMoreGames,i=e.isLoadingMoreGames,l=e.translate,s=(0,ee.useRef)(null),u=(0,ee.useRef)(null),c=(0,ee.useRef)(null),e=(0,ee.useState)(0),d=e[0],m=e[1],e=(0,ee.useState)(!1),f=e[0],p=e[1],e=(0,ee.useState)(!0),g=e[0],v=e[1],e=(0,ee.useState)(!0),y=e[0],h=e[1],e=(0,ee.useState)(),b=e[0],I=e[1],e=(0,ee.useState)(0),S=e[0],P=e[1],e=(0,ee.useCallback)(function(t){function e(){var e=null===(e=null==t?void 0:t.getBoundingClientRect())||void 0===e?void 0:e.width;e&&I(e)}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),E=(0,ee.useMemo)(function(){var e=null===(e=null===(e=null==u?void 0:u.current)||void 0===e?void 0:e.getBoundingClientRect())||void 0===e?void 0:e.width;return void 0!==b&&void 0!==e?Math.max(1,Math.floor(b/e)):0},[b]);(0,ee.useEffect)(function(){var e;v(0<=S),i?h(!0):(e=null===(e=null==s?void 0:s.current)||void 0===e?void 0:e.getBoundingClientRect().width,void 0!==b&&void 0!==e&&Math.abs(S)+b>=e?h(!0):h(!1))},[S,b,null==t?void 0:t.length,i]);var w=(0,ee.useCallback)(function(){d+Yt*E>=(null==t?void 0:t.length)&&o&&!i&&o()},[d,E,o,i,null==t?void 0:t.length]),T=(0,ee.useCallback)(function(){var e=null===(e=null===(e=null==u?void 0:u.current)||void 0===e?void 0:e.getBoundingClientRect())||void 0===e?void 0:e.width;return void 0===e?0:E*e},[E]),N=(0,ee.useCallback)(function(){var t;g||(t=T(),P(function(e){return Math.min(e+t,0)}),m(function(e){return e-E}))},[T,g,E]),x=(0,ee.useCallback)(function(){var n;y||(n=T(),P(function(e){if(null!=s&&s.current){var t=null===(t=s.current.getBoundingClientRect())||void 0===t?void 0:t.width;return Math.max(e-n,-1*t)}return e-n}),m(function(e){return e+E}),w())},[w,T,y,E]),C=(0,ee.useCallback)(function(e){return d<=e&&e<d+E},[d,E]),O=(0,ee.useCallback)(function(e){f||(p(!0),e(),setTimeout(function(){p(!1)},200))},[f]);return te().createElement("div",{"data-testid":"game-carousel",className:"horizontal-scroller games-list"},te().createElement("div",{ref:e,className:"clearfix horizontal-scroll-window"},te().createElement("div",{ref:s,className:"horizontally-scrollable",style:{left:S+"px"}},te().createElement("ul",{ref:r,className:"hlist games game-cards game-tile-list"},t.map(function(e,t){return te().createElement("li",{key:e.universeId,ref:u,className:"list-item game-card game-tile"},te().createElement(Tt,{ref:c,id:t,isVisible:C(t),page:n,gameData:e,className:"game-card-container",translate:l,buildEventProperties:a}))}))),te().createElement(Bt,{scrollClassNames:ge()("scroller","prev",{disabled:g}),scrollIconClassName:"icon-games-carousel-left",isDisabled:g,scroll:function(){return O(N)}}),te().createElement(Bt,{scrollClassNames:ge()("scroller","next",{disabled:y}),scrollIconClassName:"icon-games-carousel-right",isDisabled:y,scroll:function(){return O(x)}})))}).defaultProps={loadMoreGames:void 0};var Qt=q,Kt=function(){return(Kt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};(V=function(e){var t=e.translate,r=e.gameData,a=e.sort,o=e.page,i=e.positionId,n=e.isLoadingMoreGames,l=e.loadMoreGames,s=(0,ee.useRef)(null),u=ne(ie.DiscoverPageSessionInfo),e=(0,ee.useCallback)(function(e){if(void 0!==r){var t=e.filter(function(e){return e<(null==r?void 0:r.length)});return Kt(Kt(Kt(Kt(((e={})[oe.RootPlaceIds]=t.map(function(e){return r[e].placeId}),e[oe.UniverseIds]=t.map(function(e){return r[e].universeId}),e),re(r,t)),((e={})[oe.AbsPositions]=t,e[oe.SortPos]=i,e[oe.GameSetTypeId]=a.topicId,e)),qt(a)),((e={})[oe.Page]=o,e[oe.NumberOfLoadedTiles]=(r||[]).length,e[ie.DiscoverPageSessionInfo]=u,e))}},[r,u,i,a,o]);xt(s,r.length,e);e=(0,ee.useMemo)(function(){var e=Kt(Kt(((e={})[oe.Position]=i,e[oe.GameSetTypeId]=a.topicId,e),qt(a)),((e={})[oe.Page]=o,e[oe.TreatmentType]=c.Carousel,e[ie.DiscoverPageSessionInfo]=u,e));return $(a.sortId,o,e)},[u,o,i,a]);return te().createElement("div",{className:"games-list-container"},te().createElement("div",{className:"container-header games-filter-changer"},te().createElement("h2",null,te().createElement(P.Link,{url:e},a.topic)),te().createElement(P.Link,{url:e,className:"btn-secondary-xs see-all-link-icon btn-more"},t(pe.ActionSeeAll))),te().createElement(Qt,{gamesContainerRef:s,gameData:r,loadMoreGames:l,isLoadingMoreGames:n,buildEventProperties:function(e,t){var n;return Kt(Kt(((n={})[oe.PlaceId]=e.placeId,n[oe.UniverseId]=e.universeId,n[oe.IsAd]=e.isSponsored,n[oe.NativeAdData]=e.nativeAdData,n[oe.Position]=t,n[oe.SortPos]=i,n[oe.GameSetTypeId]=a.topicId,n),qt(a)),((n={})[oe.NumberOfLoadedTiles]=(r||[]).length,n[oe.Page]=o,n[ie.DiscoverPageSessionInfo]=u,n))},translate:t,page:o}))}).defaultProps={loadMoreGames:void 0};var $t=V;function Jt(e){var t=e.sort,a=At().contentMetadata;return 0===(null==(e=(0,ee.useMemo)(function(){return t.recommendationList.map(function(e){var t,n=e.contentType,r=e.contentId,e=null===(t=null==a?void 0:a[n])||void 0===t?void 0:t[r];return e&&((t=e).itemId=r,t.itemType=n),e}).filter(function(e){return e}).slice(0,en)},[t.recommendationList,a]))?void 0:e.length)?null:te().createElement(p.AvatarShopHomepageRecommendations,{recommendedItems:e})}function Zt(e){var t=e.loadData,n=(0,ee.useRef)(null),r=(0,ee.useRef)(null);return(0,ee.useEffect)(function(){var e=n.current;return e&&(r.current=U.elementVisibilityService.observeVisibility({element:e,threshold:je},function(e){e&&t&&t()})),function(){null!=r&&r.current&&r.current()}},[t]),t?te().createElement("div",{ref:n,"data-testid":"sentinel-tile",className:"grid-item-container game-card-container invisible"}):null}(B=function(e){var t=e.translate,n=e.sort,r=e.positionId,a=e.page,o=e.loadMoreGames,i=e.isLoadingMoreGames,l=Gt(),s=At().contentMetadata,u=null===(e=Ut(n))||void 0===e?void 0:e.componentType,e=(0,ee.useMemo)(function(){return Ft(n,s).slice(0,function(e,t){var n=Ae.maxGridTilesPerCarouselPage,r=Ae.maxTilesPerCarouselPage;if(e!==ae.GamesPage)switch(t){case f.GridTile:return n;case f.AppGameTileNoMetadata:default:return r}}(a,u))},[n,s,u,a]);return 0===(null==e?void 0:e.length)?null:a===ae.GamesPage?te().createElement($t,{key:n.topic,sort:n,translate:t,positionId:r,page:a,gameData:e,loadMoreGames:o,isLoadingMoreGames:!0===i}):te().createElement(Ot,{key:n.topic,sort:n,translate:t,positionId:r,gameData:e,friendsPresence:l,componentType:u,playerCountStyle:null===(l=Ut(n))||void 0===l?void 0:l.playerCountStyle})}).defaultProps={loadMoreGames:void 0,isLoadingMoreGames:void 0};var Xt=B,en=Ae.maxTilesPerCarouselPage;Zt.displayName="SentinelTile",Zt.defaultProps={loadData:null};var tn=Zt,nn=(0,ee.forwardRef)(function(e,t){var n=e.translate,r=e.id,a=e.buildEventProperties,e=e.gameData;return te().createElement("div",{ref:t,className:"grid-item-container game-card-container","data-testid":"game-tile-sponsored"},te().createElement(Ze,{id:r,buildEventProperties:a,gameData:e},te().createElement("div",{className:"game-card-native-ad"},te().createElement("div",{className:"native-ad-label"},n(me.LabelSponsoredAd)))))});function rn(e){var t=e.universeId,n=e.creatorName,r=e.creatorType,a=e.creatorId,o=e.linkUrl,i=e.isCreatorVerified,l=e.translate,e=(0,ee.useRef)(null);return te().createElement("div",{ref:e,className:"game-card-creator-name","data-testid":"game-card-creator-name"},te().createElement("span",{className:"text-label creator-name-label"},l(me.LabelByPrefix)," "),te().createElement("a",{href:o,onClick:function(){p.EventStream.SendEventWithTarget("buttonClick","featuredTileCreatorLabel",{creatorId:a,creatorType:r,universeId:t},p.EventStream.TargetTypes.WWW)},className:"text-overflow text-label creator-name"},n),i&&te().createElement(an.VerifiedBadgeIconContainer,{size:an.BadgeSizes.CAPTIONHEADER}))}nn.displayName="SponsoredGameTile";var an=RobloxBadges,on=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},ln=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},sn=(0,ee.forwardRef)(function(e,t){var n=e.id,r=e.buildEventProperties,a=e.gameData,o=e.translate,i=(0,ee.useState)(),l=i[0],s=i[1],u=Gt(),c=(0,ee.useMemo)(function(){return I(u,a.universeId)},[u,a.universeId]),e=(0,ee.useMemo)(function(){return 0<c.length&&l?te().createElement(ft,{gameData:l,friendData:c,translate:o}):te().createElement("div",{className:"game-card-description-info font-body","data-testid":"featured-grid-tile-description"},null==l?void 0:l.description)},[c]);(0,ee.useEffect)(function(){on(void 0,void 0,void 0,function(){var t;return ln(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ke(a.placeId.toString())];case 1:return t=e.sent(),s(t),[3,3];case 2:return t=e.sent(),console.error(t),[3,3];case 3:return[2]}})})},[]);var i=K(a.placeId,a.name,r(a,n)),n=r(a,n);return te().createElement("div",{ref:t,className:"featured-grid-item-container game-card-container","data-testid":"game-tile-featured"},te().createElement(P.Link,{url:i,className:"game-card-link",id:a.universeId.toString()},te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.gameIcon,size:Ge.ThumbnailGameIconSize.size512,targetId:a.universeId,containerClass:"game-card-thumb-container",format:Ge.ThumbnailFormat.jpeg,altName:a.name}),te().createElement("div",{className:"game-card-name-info"},te().createElement("div",null,te().createElement("div",{className:"game-card-name game-name-title",title:a.name},a.name),te().createElement(at,{totalUpVotes:a.totalUpVotes,totalDownVotes:a.totalDownVotes,playerCount:a.playerCount})),te().createElement(St,{universeId:a.universeId.toString(),placeId:a.placeId.toString(),playButtonEventProperties:n})),null!==a.creatorName&&te().createElement(rn,{universeId:a.universeId.toString(),creatorId:a.creatorId,creatorType:a.creatorType,creatorName:a.creatorName,isCreatorVerified:null!==(n=a.creatorHasVerifiedBadge)&&void 0!==n&&n,linkUrl:i,translate:o}),e))});sn.displayName="FeaturedGridTile";var un=function(){return(un=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},cn=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},dn=(0,ee.forwardRef)(function(e,t){var n=e.emphasis,r=e.friendData,a=e.componentType,o=e.playerCountStyle,e=cn(e,["emphasis","friendData","componentType","playerCountStyle"]);return e.gameData.isShowSponsoredLabel?te().createElement(nn,un({ref:t},e)):n?te().createElement(sn,un({ref:t},e)):te().createElement(Tt,un({ref:t,friendData:r,componentType:a,playerCountStyle:o},e))});dn.displayName="GameGridTile",dn.defaultProps={friendData:[],componentType:void 0,playerCountStyle:void 0};var mn=(0,ee.forwardRef)(function(e,t){var n=e.gameData,r=e.translate,a=e.emphasis,o=e.buildEventProperties,i=e.tileRef,l=e.loadData,s=e.shouldUseSentinelTile,u=e.friendsPresence,c=e.componentType,d=e.playerCountStyle,m=e.isHomeGameGrid,e=ge()("game-grid",{"home-game-grid":m},{"grid-tile-game-grid":c===f.GridTile});return te().createElement("div",{"data-testid":"game-grid",ref:t,className:e},n.map(function(e,t){return te().createElement(dn,{ref:function(e){(!0===a&&1===t||!1===a&&0===t)&&i&&(i.current=e)},key:t,id:t,gameData:e,translate:r,buildEventProperties:o,emphasis:!0===a&&0===t&&!m,friendData:u,componentType:c,playerCountStyle:d})}),s&&te().createElement(Zt,{loadData:l}))});mn.displayName="GameGrid",mn.defaultProps={friendsPresence:[],componentType:void 0,playerCountStyle:void 0,isHomeGameGrid:!1};var fn=mn,pn=function(){return(pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function gn(e){var t=e.translate,n=e.sort,r=e.positionId,a=e.itemsPerRow,o=e.recommendations,i=Gt(),l=ne(ie.HomePageSessionInfo),s=(c=At()).contentMetadata,u=c.appendContentMetadata,c=null===(e=Ut(n))||void 0===e?void 0:e.componentType,d=(0,ee.useCallback)(function(){var e=o.filter(function(e){var t=e.contentType,e=e.contentId;return!(null!==(t=null==s?void 0:s[t])&&void 0!==t&&t[e])});0<e.length&&R(e.slice(0,yn),l).then(function(e){return u(e.contentMetadata)}).catch(function(){})},[o,l,s,u]);return(0,ee.useEffect)(function(){d()},[d]),0===(null==(e=(0,ee.useMemo)(function(){return Lt(o,s)},[o,s]))?void 0:e.length)?null:te().createElement(vn,{key:n.topic,sort:n,gameData:e,translate:t,positionId:r,itemsPerRow:a,friendsPresence:i,componentType:c,playerCountStyle:null===(n=Ut(n))||void 0===n?void 0:n.playerCountStyle})}(q=function(e){var r=e.gameData,a=e.sort,o=e.positionId,t=e.friendsPresence,n=e.componentType,i=e.playerCountStyle,l=e.itemsPerRow,s=e.translate,u=(0,ee.useRef)(null),c=(0,ee.useRef)(null),d=ne(ie.HomePageSessionInfo),e=(0,ee.useCallback)(function(e){if(void 0!==r){var t=e.filter(function(e){return e<(null==r?void 0:r.length)});return pn(pn(((e={})[oe.RootPlaceIds]=t.map(function(e){return r[e].placeId}),e[oe.UniverseIds]=t.map(function(e){return r[e].universeId}),e[oe.AbsPositions]=t,e),re(r,t)),((t={})[oe.SortPos]=o,t[oe.NumberOfLoadedTiles]=null==r?void 0:r.length,t[oe.GameSetTypeId]=a.topicId,t[oe.Page]=ae.HomePage,t[ie.HomePageSessionInfo]=d,t))}},[r,d,o,a.topicId]);return xt(u,r.length,e),(0,ee.useEffect)(function(){l&&null!=u&&u.current&&u.current.style.setProperty("--items-per-row",l.toString())},[l]),te().createElement("div",{"data-testid":"home-page-game-grid"},te().createElement("div",{className:"container-header"},te().createElement("h2",null,a.topic)),te().createElement(mn,{ref:u,tileRef:c,gameData:r,emphasis:!1,translate:s,buildEventProperties:function(e,t){var n={};return n[oe.PlaceId]=e.placeId,n[oe.UniverseId]=e.universeId,n[oe.IsAd]=e.isSponsored,n[oe.NativeAdData]=e.nativeAdData,n[oe.Position]=t,n[oe.SortPos]=o,n[oe.NumberOfLoadedTiles]=(r||[]).length,n[oe.GameSetTypeId]=a.topicId,n[oe.Page]=ae.HomePage,n[ie.HomePageSessionInfo]=d,n},isHomeGameGrid:!0,friendsPresence:t,componentType:n,playerCountStyle:i}))}).defaultProps={componentType:void 0,playerCountStyle:void 0,itemsPerRow:void 0};var vn=q,yn=Ae.sortlessGridMaxTilesMetadataToFetch;function hn(e){var n=e.translate,e=(m=(0,ee.useState)(!1))[0],t=m[1],r=(m=(0,ee.useState)(void 0))[0],o=m[1],a=(0,ee.useRef)(void 0),i=(m=(0,ee.useState)(!1))[0],l=m[1],s=(m=(0,ee.useState)(new Map))[0],u=m[1],c=M(ie.DiscoverPageSessionInfo,!0),d=(0,ee.useCallback)(function(e){t(!1),l(!0),a.current=e,D(c,e).then(Vt).then(function(t){o(e?function(e){return{sorts:Sn(Sn([],null!==(e=null==e?void 0:e.sorts)&&void 0!==e?e:[]),t.sorts),nextSortsPageToken:t.nextSortsPageToken}}:t)}).catch(function(){t(!0)}).finally(function(){l(!1)})},[c]),m=(0,ee.useCallback)(function(){null!=r&&r.nextSortsPageToken&&r.nextSortsPageToken!==a.current&&!i&&d(null==r?void 0:r.nextSortsPageToken)},[d,i,null==r?void 0:r.nextSortsPageToken]);function f(t,n){u(function(e){e=new Map(e);return e.set(t,n),e})}(0,ee.useEffect)(function(){d()},[d]);var p=(0,ee.useCallback)(function(t){var e,a=null===(e=null==r?void 0:r.sorts)||void 0===e?void 0:e.findIndex(function(e){return e.sortId===t});void 0===a||null==r||!r.sorts[a]||(e=null==r?void 0:r.sorts[a]).nextPageToken&&!s.get(t)&&(f(t,!0),k(c,t,e.nextPageToken).then(Ht).then(function(e){return n=a,r=e,void o(function(e){if(e){var t=e.sorts;return t[n]=In(In({},t[n]),{games:Sn(Sn([],t[n].games),r.games),nextPageToken:r.nextPageToken}),In(In({},e),{sorts:t})}return e});var n,r}).catch(function(){}).finally(function(){f(t,!1)}))},[r,s,c]);return te().createElement("div",{className:"games-page-container"},te().createElement("div",{className:"section"},te().createElement("div",{className:"games-list-header"},te().createElement("h1",null,n("Label.Discover")))),e&&!r&&te().createElement(ye,{errorMessage:n(fe.LabelApiError),onRefresh:function(){return d()}}),null==r?void 0:r.sorts.map(function(e,t){return te().createElement(bn,{key:t,translate:n,sort:e,positionId:t,currentPage:ae.GamesPage,itemsPerRow:void 0,gridRecommendations:[],loadMoreGames:function(){return p(e.sortId)},isLoadingMoreGames:!0===s.get(e.sortId)})}),!e&&te().createElement(tn,{loadData:m}),i&&te().createElement(P.Loading,null))}(V=function(e){var t=e.translate,n=e.sort,r=e.positionId,a=e.currentPage,o=e.itemsPerRow,i=e.gridRecommendations,l=e.loadMoreGames,s=e.isLoadingMoreGames;switch(n.treatmentType){case c.Carousel:return te().createElement(Xt,{translate:t,sort:n,positionId:r,page:a,loadMoreGames:l,isLoadingMoreGames:s});case c.AvatarCarousel:return te().createElement(Jt,{sort:n});case c.SortlessGrid:return te().createElement(gn,{translate:t,sort:n,positionId:r,itemsPerRow:o,recommendations:null!=i?i:[]});default:return null}}).defaultProps={loadMoreGames:void 0,isLoadingMoreGames:void 0,gridRecommendations:[]};var bn=V,In=function(){return(In=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Sn=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},Pn=null!==p.CurrentUser&&void 0!==p.CurrentUser&&p.CurrentUser.userId?"gameSort_".concat(p.CurrentUser.userId):"gameSort_guest",En=p.EnvironmentUrls.gamesApi,wn={gamesDefaultSortAlgorithm:"GamesDefaultSorts",gamesHomeSortAlgorithm:"HomeSorts",pageSizeOfHomeSorts:12,pageSize:40,getGameSortsWithDetaultSorts:{url:"".concat(En,"/v1/games/sorts"),withCredentials:!0},getGamesList:{url:"".concat(En,"/v1/games/list"),withCredentials:!0},getGameMedias:function(e){return{url:"".concat(En,"/v2/games/").concat(e,"/media"),withCredentials:!0}},getPlayabilityStatus:{url:"".concat(En,"/v1/games/multiget-playability-status"),withCredentials:!0},getRecommendedGames:function(e){return{url:"".concat(En,"/v1/games/recommendations/game/").concat(e),withCredentials:!0}},params:{sortToken:null,keyword:null,exclusiveStartId:null,isKeywordSuggestionEnabled:!0,hasMoreRows:!0,startRows:0,maxRows:60,gameSetTargetId:null},recommendedGamesParams:{maxRows:6},mediaTypes:{image:"Image",youtube:"YouTubeVideo"}};function Tn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Nn(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(a),!0).forEach(function(e){var t,n;t=r,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Tn(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function xn(e,r){var a=e||wn.gamesDefaultSortAlgorithm,e={gameSortsContext:a};return Cn&&clearTimeout(Cn),d.httpService.get(wn.getGameSortsWithDetaultSorts,e).then(function(e){var s,u,c,d,m,t,n=e.data;return null!=n&&n.sorts&&r&&(s=a,e=(t=n).sorts,u=t.timeFilters,c=t.pageContext,d=(new Date).getTime(),t=U.localStorageService.getLocalStorage(Pn)||{},m={},e.forEach(function(e,t){var n=e.token,r=e.displayName,a=e.name,o=e.gameSetTargetId,i=e.tokenExpiryInSeconds,l=e.contextCountryRegionId,e=e.timeOptionsAvailable;m[a]={name:a,displayName:r,token:n,gameSetTargetId:o,dateStoredTime:d,tokenExpiryInSeconds:i,gameSortContext:s,sortPosition:t,pageContext:c,contextCountryRegionId:l,timeOptionsAvailable:e,timeFilters:u}}),t=Object.assign(t,m),U.localStorageService.setLocalStorage(Pn,t),t=0<(null==(t=n.sorts)?void 0:t.length)?1e3*t[0].tokenExpiryInSeconds:36e5,Cn=setTimeout(function(){xn()},t)),n})}var Cn=null,On=xn,Rn=function(e){return d.httpService.get(wn.getGamesList,e).then(function(e){return e.data})},Dn=function(e,t){var n=Nn({},t);return n.hasMoreRows=e.hasMoreRows,e.hasMoreRows&&(e.nextPageExclusiveStartId?n.exclusiveStartId=e.nextPageExclusiveStartId:(e=t.startRows,t=t.maxRows,n.startRows=e+t)),n},kn=function(e){var t=null;return e.forEach(function(e){"PastWeek"===e.name&&(t=e.token)}),t};function Gn(e){var t=e.game,n=e.isOneLine,e=e.handlePlayerInteraction,n=ge()("game-card-name game-name-title",{"game-name-oneline":n});return te().createElement(te().Fragment,null,e?te().createElement("div",{"data-testid":"game-tile-game-name",className:n,title:t.name,onClick:e,role:"button","aria-hidden":!0},t.name):te().createElement("div",{"data-testid":"game-tile-game-name",className:n,title:t.name},t.name))}Gn.defaultProps={isOneLine:!1,handlePlayerInteraction:null},Gn.propTypes={game:H().shape({name:H().string}).isRequired,isOneLine:H().bool,handlePlayerInteraction:H().func};var An=Gn;function Ln(e){var t=e.game,n=t.totalUpVotes,e=t.totalDownVotes,t=t.playerCount,n=function(e,t){var n=0;if(!Number.isNaN(e)&&!Number.isNaN(t)){if(0===e){if(0===t)return null;n=0}else n=0===t?100:Math.floor(e/(e+t)*100);100<n&&(n=100)}return"".concat(n,"%")}(n,e),e=h(t);return te().createElement("div",{"data-testid":"game-tile-card-info",className:"game-card-info"},te().createElement("span",{className:"info-label icon-votes-gray"}),n?te().createElement("span",{"data-testid":"game-tile-card-info-vote-label",className:"info-label vote-percentage-label"},n):te().createElement("span",{"data-testid":"game-tile-card-info-no-vote",className:"info-label no-vote"}),te().createElement("span",{className:"info-label icon-playing-counts-gray"}),te().createElement("span",{className:"info-label playing-counts-label",title:t},e))}Ln.propTypes={game:H().shape({universeId:H().number,playerCount:H().number,totalUpVotes:H().number,totalDownVotes:H().number}).isRequired};var jn=Ln,Mn="Label.SponsoredAd";function Un(e){e=e.translate;return te().createElement("div",{"data-testid":"game-tile-native-ad",className:"game-card-native-ad"},te().createElement("span",{className:"font-footer native-ad-label"},e(Mn)))}Un.propTypes={translate:H().func.isRequired};var Fn=Un,Hn={notificationTypes:{gameFavoriteNotifications:"GameFavoriteNotifications",gameCloseNotifications:"GameCloseNotifications"},sortsNeedRealtimeUpdate:{myFavorite:"MyFavorite",myRecent:"MyRecent"},pageTypes:{home:"Home",gameDetail:"GameDetail"},maxNumOfGamesPerList:6,seeAllLinkLabel:"Action.SeeAll",NoGamesLabel:"Label.NoGames",seeAllClass:"see-all-button games-filter-changer btn-secondary-xs btn-more see-all-link-icon",deviceTypes:{computer:"Computer"}},Vn=function(e,t,n,r,a,o,i,l,s){var u=8<arguments.length&&void 0!==s&&s,s=e.placeId,e=e.nativeAdData,u={PageType:t,PlaceId:s,Position:n+1,IsLargeGameTile:u};t===Hn.pageTypes.gameDetail&&(u.RecommendationSourceId=l,u.RecommendationAlgorithm=2),e&&(u.NativeAdData=e),r&&(u.SortName=r),null!=a&&a.pageId&&(u.PageId=null==a?void 0:a.pageId),-1<o&&(u.SortPosition=o+1);u=d.urlService.getUrlWithQueries(U.entityUrl.game.getReferralPath(),u),i=i||(new Date).toISOString();return u="".concat(u,"&LocalTimestamp=").concat(i)};function qn(e){var t=e.friendsData,n=e.handlePlayerInteraction,o=e.friendsInGame,i=Ue,e=o.length,l=i<e?"+".concat(o.length-i+1):0,s={};return t.forEach(function(e){s[e.id]=e}),te().createElement("ul",{"data-testid":"game-players-players",className:"cursor-pointer game-card-avatar-slots",onClick:n,"aria-hidden":"true"},o.length&&o.map(function(e,t){if(t+1<i&&s[e]){var n=e+t,r=s[e],a=r.id,r=r.nameForDisplay;return te().createElement("li",{key:n,className:"avatar avatar-headshot avatar-headshot-xs",title:r},te().createElement(We,{playerId:a,altName:r}))}if(t+1===i&&s[e]&&o.length===i){a=e+t,r=s[e],e=r.id,r=r.nameForDisplay;return te().createElement("li",{key:a,className:"avatar avatar-headshot avatar-headshot-xs",title:r},te().createElement(We,{playerId:e,altName:r}))}return t+1===i&&o.length>i?te().createElement("li",{className:"avatar avatar-headshot avatar-headshot-xs offset-card"},te().createElement("span",{className:"xsmall avatar-offset-label"},l)):null}))}qn.propTypes={friendsData:H().arrayOf(H().shape({presense:H().shape({userPresenceType:H().number}),id:H().number,nameForDisplay:H().string})).isRequired,handlePlayerInteraction:H().func.isRequired,friendsInGame:H().arrayOf(H().number).isRequired};var Bn=qn,zn={offline:{status:0,className:""},online:{status:1,className:"icon-online"},ingame:{status:2,className:"icon-game"},instudio:{status:3,className:"icon-studio"}},_n=function(e,a){var o=[];return null!=e&&e.length&&e.forEach(function(e){var t,n,r;null!=e&&e.presence&&(n=(r=e.presence).universeId,r=r.userId,n===a&&(null==e||null===(t=e.presence)||void 0===t?void 0:t.userPresenceType)===zn.ingame.status&&o.push(r))}),o},Wn=function(e,a,o,i){if(null==e||!e.length||null==a||!a.length)return null;var l=!1;return e.forEach(function(t){var n=t.userId,e=t.universeId,r=t.userPresenceType;e===i&&r===zn.ingame.status&&o.indexOf(n)<0?(l=!0,a.forEach(function(e){n===e.id&&(e.presence=t)})):r!==zn.ingame.status&&-1<o.indexOf(n)&&(l=!0,a.forEach(function(e){n===e.id&&(e.presence=t)}))}),l?a:null};function Yn(){return(Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(B=te().forwardRef(function(e,t){var n=e.game,r=e.pageType,a=e.index,o=e.sortName,i=e.pageContext,l=e.sortPosition,s=e.dateTime,u=e.friendsData,c=e.gameDetailPlaceId,d=e.isHidden,m=e.buildEventProperties,f=n.universeId,i=Vn(n,r,a,o,i,l,s,c);n.referralUrl=i;var l=Qn((0,ee.useState)(u),2),s=l[0],p=l[1],c=Qn((0,ee.useState)([]),2),g=c[0],v=c[1],l=Qn((0,ee.useState)(_n(u,f)),2),y=l[0],h=l[1],c=Qn((0,ee.useState)(!1),2),l=c[0],b=c[1],I=(0,ee.useRef)(),c=function(){b(!0),I.current=!0},m=m?X(n.placeId,n.name,m(n,a)):i,a=function(){null!=g&&g.length&&(h(_n(g,f)),p(g),v([])),b(!1),I.current=!1},S=(0,ee.useCallback)(function(e){null==e||!e.detail||null!=(e=Wn(e.detail,u,y,f))&&e.length&&(I.current?v(e):(h(_n(e,f)),p(e)))},[u,y,f]),i=te().createElement("div",{className:"game-card-thumb-container"},te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.gameIcon,size:Ge.DefaultThumbnailSize,targetId:n.universeId,containerClass:"game-card-thumb",format:Ge.ThumbnailFormat.jpeg,altName:n.name}));return(0,ee.useEffect)(function(){return null!=u&&u.length&&document.addEventListener("Roblox.Presence.Update",S),function(){null!=u&&u.length&&document.removeEventListener("Roblox.Presence.Update",S)}},[u,y,S,f]),te().createElement("div",{className:"game-card-container",ref:t},0<y.length&&te().createElement(te().Fragment,null,te().createElement(P.Link,{tabIndex:d?-1:0,"aria-hidden":d,url:m,className:"game-card-link",id:n.universeId},i),te().createElement(An,{game:n,isOneLine:!0,handlePlayerInteraction:c}),te().createElement(Bn,{handlePlayerInteraction:c,friendsData:s,friendsInGame:y}),te().createElement(P.Modal,{show:l,onHide:a,size:"lg"},te().createElement(Xe,Yn({friendsData:s,friendsInGame:y,game:n,dismissModal:a},e)))),0===y.length&&te().createElement(P.Link,{tabIndex:d?-1:0,"aria-hidden":d,url:m,className:"game-card-link",id:n.universeId},i,te().createElement(An,{game:n}),n.isShowSponsoredLabel&&te().createElement(Fn,e),!n.isShowSponsoredLabel&&te().createElement(jn,{game:n})))})).defaultProps={sortName:null,sortPosition:-1,pageContext:{pageId:null},dateTime:null,friendsData:[],buildEventProperties:void 0,gameDetailPlaceId:null,isHidden:!1},B.propTypes={game:H().shape({universeId:H().number,placeId:H().number,name:H().string,playerCount:H().number,isShowSponsoredLabel:H().bool,nativeAdData:H().string,referralUrl:H().string}).isRequired,buildEventProperties:H().func,pageType:H().string.isRequired,isHidden:H().bool,index:H().number.isRequired,sortName:H().string,pageContext:H().shape({pageId:H().string}),sortPosition:H().number,dateTime:H().string,friendsData:H().arrayOf(H().shape({presense:H().shape({userPresenceType:H().number}),id:H().number,nameForDisplay:H().string})),gameDetailPlaceId:H().number},B.displayName="GameTile";var $n=B,Jn=Le.keyBoardEventCode;function Zn(e){var t=e.scrollClassNames,n=e.scrollIconClassName,r=e.scroll;e.isDisabled;return te().createElement("div",{"data-testid":"game-carousel-scroll-bar",className:t,onClick:r,onKeyDown:function(e){e.code===Jn.enter&&(e.stopPropagation(),e.preventDefault(),r(e))},role:"button",tabIndex:0},te().createElement("div",{className:"arrow"},te().createElement("span",{className:n})),te().createElement("div",{className:"spacer"}))}function Xn(e){return(null==e?void 0:e.clientWidth)+14}function er(e,t){return Number.isNaN(t)?0:Math.floor(e/t)*t}Zn.propTypes={scrollClassNames:H().string.isRequired,scrollIconClassName:H().string.isRequired,scroll:H().func.isRequired,isDisabled:H().bool.isRequired};var tr=Zn,nr="scroller prev",rr="scroller next",ar="icon-games-carousel-left",or="icon-games-carousel-right",ir={left:"0px"},lr={gameCarousel:"Games",gameSearch:"GameSearch",gameSeeAll:"GamesSeeAll"},sr=70,ur=60,cr={featureGameTile:"featured-tile"},dr=p.DeviceMeta&&(0,p.DeviceMeta)().isDesktop,mr=16,fr=32,pr=function(e,t,n){return e+er(t,n)},gr=function(e,t,n){return e-er(t,n)},vr=function(e){return null==e?void 0:e.clientHeight},yr=function(e,t){return Number.isNaN(t)?0:Math.floor(e/t)},hr=function(e){return 0===e},br=function(e,t,n){return e<=Math.abs(n)+t},Ir=Xn;(q=function(e){var t=e.gameDescription,n=e.placeId;return te().createElement("div",{"data-testid":"game-tile-hover-game-tile-contents",className:"game-card-contents"},t&&te().createElement("p",{className:"game-description font-caption-header"},t),te().createElement(P.Button,{width:P.Button.widths.full,variant:P.Button.variants.growth,size:P.Button.sizes.extraSmall,onClick:function(){U.playGameService.launchGame(U.playGameService.buildPlayGameProperties(void 0,n),{eventName:"playGameClicked",ctx:"click",properties:{placeId:n},gamePlayIntentEventCtx:"PlayButton"})}},te().createElement("span",{className:"icon-common-play"})))}).defaultProps={gameDescription:null},q.propTypes={gameDescription:H().string,placeId:H().number.isRequired};var Sr,Pr=q,V={common:["CommonUI.Controls"],feature:"Feature.GameDetails"};(B={})[B.Image=1]="Image",B[B.YouTubeVideo=33]="YouTubeVideo",B[B.Unknown=0]="Unknown",(q=Sr=Sr||{}).Image="Image",q.YouTubeVideo="YouTubeVideo",q.Place="Place",q[q.Unknown=0]="Unknown";var Er,B=go(640),wr=go.n(B),Tr="game-details-play-button-container",Nr={back:"Action.Back",next:"Action.Next"},q={delay:6e3},xr=function(e){return{width:768,height:432,videoId:e,host:"https://www.youtube-nocookie.com",playerVars:{cc_load_policy:1,modestbranding:1}}},Cr=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},Or=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};(B=Er=Er||{})[B.Unstarted=-1]="Unstarted",B[B.Ended=0]="Ended",B[B.Playing=1]="Playing",B[B.Paused=2]="Paused",B[B.Buffering=3]="Buffering",B[B.Cued=5]="Cued";var Rr=(0,ee.forwardRef)(function(e,t){function n(e){switch(e.data){case Er.Playing:case Er.Buffering:i&&i(e);break;case Er.Paused:l&&l(e);break;case Er.Ended:s&&s(e)}}function r(e){var t;null!==(t=c.current)&&void 0!==t&&t.mute(),u&&u(e)}var a=e.id,o=e.className,i=e.onPlay,l=e.onPaused,s=e.onEnd,u=e.onReady,c=(0,ee.useRef)(void 0);return(0,ee.useImperativeHandle)(t,function(){return{pause:function(){var e;null!==(e=c.current)&&void 0!==e&&e.pauseVideo()},play:function(e){var t;void 0!==e&&null!==(t=c.current)&&void 0!==t&&t.seekTo(e,!0),null!==(e=c.current)&&void 0!==e&&e.playVideo()},getCurrentTime:function(){return Cr(void 0,void 0,Promise,function(){var t;return Or(this,function(e){switch(e.label){case 0:return[4,null===(t=c.current)||void 0===t?void 0:t.getCurrentTime()];case 1:return[2,e.sent()||-1]}})})},getDuration:function(){return Cr(void 0,void 0,Promise,function(){var t;return Or(this,function(e){switch(e.label){case 0:return[4,null===(t=c.current)||void 0===t?void 0:t.getDuration()];case 1:return[2,e.sent()||-1]}})})}}}),(0,ee.useEffect)(function(){return c.current=wr()(a,xr(a)),c.current.on("stateChange",n),c.current.on("ready",r),function(){var e;null!==(e=c.current)&&void 0!==e&&e.destroy()}},[]),te().createElement("div",{className:o},te().createElement("div",{id:a}))}),Dr=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},kr=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Gr=(0,ee.forwardRef)(function(e,t){function u(){h.current&&Object.values(h.current).forEach(function(e){e.pause()})}function n(s){return Dr(void 0,void 0,void 0,function(){var t,n,r,a,o,i,l;return kr(this,function(e){switch(e.label){case 0:return(null!=s&&s.preventDefault(),u(),t=(y.current+1)%c.length,d(t),y.current=t,b(),c[t].type!==Sr.YouTubeVideo)?[3,3]:(n=null===(l=h.current)||void 0===l?void 0:l[t],l=(a=Math).ceil,[4,n.getDuration()]);case 1:return r=l.apply(a,[e.sent()]),i=(o=Math).ceil,[4,n.getCurrentTime()];case 2:((o=i.apply(o,[e.sent()]))<=0||r<=o)&&y.current===t&&n.play(0),e.label=3;case 3:return[2]}})})}function r(e){null!=e&&e.preventDefault(),u(),e=y.current-1<0?c.length-1:y.current-1,d(e),y.current=e,b()}function a(){v.current&&clearTimeout(v.current)}var c=e.items,o=e.delay,i=e.translate,l=(0,ee.useState)(0),s=l[0],d=l[1],e=(0,ee.useState)(!1),l=e[0],m=e[1],f=(0,ee.useRef)(!1),e=(0,ee.useState)(!1),p=e[0],g=e[1],v=(0,ee.useRef)(void 0),y=(0,ee.useRef)(s),h=(0,ee.useRef)({}),b=function(){a(),p||f.current||(v.current=setTimeout(function(){n()},o))};(0,ee.useEffect)(function(){var e;return b(),null!==(e=document.getElementById(Tr))&&void 0!==e&&e.addEventListener("click",u),function(){var e;a(),null!==(e=document.getElementById(Tr))&&void 0!==e&&e.removeEventListener("click",u)}},[]),(0,ee.useImperativeHandle)(t,function(){return{start:b,stop:a,next:n,back:r}});t=function(e){e.stopPropagation()};return te().createElement("div",{"data-testid":"carousel",onFocus:function(){m(!0),f.current=!0,a()},onBlur:function(){m(!1),f.current=!1,b()},onMouseEnter:function(){m(!0),f.current=!0,a()},onMouseLeave:function(){m(!1),f.current=!1,b()}},1<c.length&&te().createElement(te().Fragment,null,te().createElement(P.Button,{className:ge()("carousel-controls","carousel-controls-left",{"carousel-controls-visible":l}),onClick:r,onBlur:t,"aria-label":i(Nr.back)},te().createElement("span",{className:"icon-carousel-left"})),te().createElement(P.Button,{className:ge()("carousel-controls","carousel-controls-right",{"carousel-controls-visible":l}),onClick:n,onBlur:t,"aria-label":i(Nr.next)},te().createElement("span",{className:"icon-carousel-right"}))),c.map(function(e,t){switch(e.type){case Sr.Image:case Sr.Place:return te().createElement(Ge.Thumbnail2d,{key:e.assetId,type:e.type===Sr.Image?Ge.ThumbnailTypes.assetThumbnail:Ge.ThumbnailTypes.gameThumbnail,size:Ge.ThumbnailUniverseThumbnailSize.width768,targetId:e.assetId,altName:e.altText,containerClass:ge()("carousel-item",{"carousel-item-active":t===s,"carousel-item-active-out":t===(s-1<0?c.length-1:s-1)||t===(s+1)%c.length})});case Sr.YouTubeVideo:return te().createElement(Rr,{ref:function(e){e&&(h.current[t]=e)},id:e.videoHash,key:e.videoHash,className:ge()("carousel-item","carousel-video",{"carousel-item-active":t===s,"carousel-item-active-out":t===(s-1<0?c.length-1:s-1)||t===(s+1)%c.length}),onPlay:function(){a(),g(!0)},onPaused:function(){b(),g(!1)},onEnd:function(){n(),g(!1)},onReady:function(){var e;0===t&&y.current===t&&null!==(e=h.current)&&void 0!==e&&e[t].play(0)}});default:return null}}))}),Ar=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},Lr=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},jr=U.dataStores.gamesDataStore,Mr={},Ur=function(n){return Ar(void 0,void 0,Promise,function(){var t;return Lr(this,function(e){switch(e.label){case 0:return Mr[n]?[2,Mr[n]]:[4,jr.getUniverseMedia(n)];case 1:return t=e.sent().data.data,t=(void 0===t?[]:t).filter(function(e){return e.approved}).map(function(e){switch(e.assetType){case Sr.Image:return{type:e.assetType,assetId:e.imageId,altText:e.altText};case Sr.YouTubeVideo:return{type:e.assetType,videoHash:e.videoHash};default:return{type:Sr.Unknown,assetId:0}}}).filter(function(e){return e.type!==Sr.Unknown}),[2,Mr[n]=t]}})})},Fr=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},Hr=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Vr=(0,t.withTranslations)(function(e){var t=e.translate,n=e.placeId,r=e.universeId,a=e.delay,o=(0,ee.useState)(void 0),e=o[0],i=o[1];return(0,ee.useEffect)(function(){Fr(void 0,void 0,void 0,function(){var t;return Hr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Ur(r)];case 1:return t=e.sent(),i(t),[3,3];case 2:return e.sent(),i([]),[3,3];case 3:return[2]}})})},[r]),void 0===e?te().createElement("div",{className:"shimmer","data-testid":"loading"}):0===e.length?te().createElement(Gr,{translate:t,delay:a,items:[{type:Sr.Place,assetId:parseInt(n,10)}]}):te().createElement(Gr,{translate:t,delay:a,items:e})},V),qr=q.delay;(q=te().forwardRef(function(e,t){var n=e.game,r=e.isFocused,a=e.pageType,o=e.index,i=e.sortName,l=e.pageContext,s=e.sortPosition,u=e.dateTime,c=e.translate,d=e.buildEventProperties,m=n.placeId,f=n.universeId,p=n.gameDescription,u=Vn(n,a,o,i,l,s,u,m,!0);n.referralUrl=u;u=d?X(n.placeId,n.name,d(n,o)):u;return te().createElement("div",{className:"featured-game-container game-card-container",ref:t},te().createElement(P.Link,{url:u,className:"game-card-link"},r&&te().createElement("div",{className:"thumb-container"},te().createElement(Vr,{placeId:m,universeId:f,translate:c,delay:.75*qr}),te().createElement("div",{className:"thumb-mask"})),te().createElement("div",{className:"featured-game-icon-container"},te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.gameIcon,size:Ge.ThumbnailGameIconSize.size512,targetId:f,containerClass:"brief-game-icon",format:Ge.ThumbnailFormat.jpeg,altName:n.name})),te().createElement("div",{className:"info-container"},te().createElement(An,{game:n}),n.isShowSponsoredLabel&&te().createElement(Fn,e),!n.isShowSponsoredLabel&&te().createElement(jn,{game:n}))),te().createElement(Pr,{placeId:m,gameDescription:p}))})).defaultProps={isFocused:!1,sortName:null,sortPosition:-1,pageContext:{pageId:null},dateTime:null,buildEventProperties:void 0},q.propTypes={game:H().shape({universeId:H().number,placeId:H().number,name:H().string,gameDescription:H().string,playerCount:H().number,isShowSponsoredLabel:H().bool,nativeAdData:H().string,referralUrl:H().string}).isRequired,isFocused:H().bool,pageType:H().string.isRequired,index:H().number.isRequired,sortName:H().string,pageContext:H().shape({pageId:H().string}),sortPosition:H().number,dateTime:H().string,translate:H().func.isRequired,buildEventProperties:H().func},q.displayName="HoverGameTile";var Br=q;function zr(){return(zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yr(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function Qr(e){var t=e.game,n=e.gameTileRef,r=e.cursor,a=e.index,o=e.numGamesFitted,i=Yr(e,["game","gameTileRef","cursor","index","numGamesFitted"]),l=a===r,s=a===r+o-1,u=r<=a&&a<=r+o-1,e=_r((0,ee.useState)(!1),2),r=e[0],c=e[1],o=_r(It(function(){c(!1)},100),2),e=o[0],d=o[1],o=_r(It(function(){u&&c(!0)},100),2),m=o[0],f=o[1];return te().createElement("li",{className:ge()("list-item hover-game-tile",{"first-tile":l},{"last-tile":s},{focused:r}),onMouseOver:m,onMouseLeave:function(){f(),c(!1)},onFocus:function(){d(),m()},onBlur:e,id:null==t?void 0:t.universeId},(null==t?void 0:t.universeId)&&te().createElement(Br,zr({game:t,isFocused:r,pageType:lr.gameCarousel,ref:n,index:a},i)))}Qr.defaultProps={buildEventProperties:void 0},Qr.propTypes={game:H().shape({universeId:H().number}).isRequired,gameTileRef:H().shape({current:H().instanceOf(Element)}).isRequired,cursor:H().number.isRequired,index:H().number.isRequired,numGamesFitted:H().number.isRequired,sortApiParams:H().shape({hasMoreRows:H().bool}).isRequired,pageContext:H().shape({pageId:H().string}).isRequired,sortPosition:H().number.isRequired,sortName:H().string.isRequired,translate:H().func.isRequired,buildEventProperties:H().func};var Kr=Qr;function $r(){return($r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jr(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Zr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jr(Object(n),!0).forEach(function(e){Xr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ta(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function na(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function ra(e){function a(e){k({left:"".concat(e,"px")})}function t(){var e,n,r,t;A.isPrevDisabled||((e=N)&&!Number.isNaN(e)||(e=Ir(y.current),x(e)),t=pr(w,S,N),T(t),a(t),H(t),(e=V-O)<=_&&(r=(t=_-sr)<0?0:t,t=V,(n=K).forEach(function(e,t){V<t&&(n[t]={}),t<=V&&r<=t&&(n[t]=B[t])}),W(r),Q(t),$(n)),q(e))}function n(e,n){var r=e,a=(e=Y+sr)>(null==n?void 0:n.length)?null==n?void 0:n.length:e;r.forEach(function(e,t){t<V&&(r[t]={}),V<=t&&t<a&&(r[t]=n[t])}),W(V),Q(a),$(r)}var r=e.gamesData,o=e.loadMore,i=e.name,l=e.sortApiParams,s=e.pageContext,u=e.sortPosition,c=e.sortStyle,d=e.sort,m=e.isInitializedLoading,f=na(e,["gamesData","loadMore","name","sortApiParams","pageContext","sortPosition","sortStyle","sort","isInitializedLoading"]),p=(0,ee.useRef)(),g=(0,ee.useRef)(),v=(0,ee.useRef)(),y=(0,ee.useRef)(),h=(0,ee.useRef)(),b=(0,ee.useRef)(!1),I=(lr.gameCarousel,ea((0,ee.useState)(null===(C=p.current)||void 0===C?void 0:C.clientWidth),2)),S=I[0],P=I[1],E=ea((0,ee.useState)(null!==(D=g.current)&&void 0!==D&&D.offsetLeft?null===(G=g.current)||void 0===G?void 0:G.offsetLeft:0),2),w=E[0],T=E[1],e=ea((0,ee.useState)(Ir(y.current)),2),N=e[0],x=e[1],C=ea((0,ee.useState)(yr(S,N)),2),O=C[0],R=C[1],I=ea((0,ee.useState)(ir),2),D=I[0],k=I[1],G=ea((0,ee.useState)({isPrevDisabled:!0,isNextDisabled:!1}),2),A=G[0],L=G[1],j=nr,M=rr,E=ar,e=or,C=ea((0,ee.useState)({prev:j,next:M}),2),I=C[0],U=C[1],F=(0,ee.useCallback)(function(e,t){L({isPrevDisabled:e,isNextDisabled:t});e=ge()(j,{disabled:e}),t=ge()(M,{disabled:t});U({prev:e,next:t})},[j,M]),H=(0,ee.useCallback)(function(e){var t,n=hr(e),r=null===(t=g.current)||void 0===t?void 0:t.clientWidth,a=S;S||(a=null===(t=p.current)||void 0===t?void 0:t.clientWidth);e=br(r,a,e);F(n,e)},[S,F]),G=ea((0,ee.useState)(0),2),V=G[0],q=G[1],C=ea((0,ee.useState)(r),2),B=C[0],z=C[1],G=ea((0,ee.useState)(0),2),_=G[0],W=G[1],C=ea((0,ee.useState)(20),2),Y=C[0],Q=C[1],G=ea((0,ee.useState)(r.map(function(e,t){return _<=t&&t<=Y?e:{}})),2),K=G[0],$=G[1],J=(0,ee.useCallback)(function(e){A.isNextDisabled||(o(),e||((e=N)&&!Number.isNaN(e)||(e=Ir(y.current),x(e)),e=gr(w,S,e),T(e),a(e),H(e),e=V+O,Y<=V+2*O&&n(K,B),q(e)))});(0,ee.useEffect)(function(){var e,t=Ir(y.current);Number.isNaN(t)||(x(function(){return t}),e=yr(S,t),R(e))},[S]),(0,ee.useEffect)(function(){function e(){var e;P(null===(e=p.current)||void 0===e?void 0:e.clientWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[]),(0,ee.useEffect)(function(){var e;return m?(P(null===(e=p.current)||void 0===e?void 0:e.clientWidth),T(null===(e=g.current)||void 0===e?void 0:e.offsetLeft)):Y<=V+2*O&&n(K,B),H(w),function(){}},[K]),(0,ee.useEffect)(function(){var e,t,n;return null!=r&&r.length&&(z(r),K.length?(e=r.length,(t=K.length)<e&&(n=Array(e-t).fill({}),$(function(e){return e.concat(n)}))):($(function(e){return e.concat(r)}),Q(r.length))),function(){}},[r]);var C=(0,ee.useCallback)(function(){J(!0)},[J]),Z=ne(ie.DiscoverPageSessionInfo),G=(0,ee.useCallback)(function(e){if(void 0!==B){var t=e.filter(function(e){return e<(null==B?void 0:B.length)});return Zr(Zr((Xr(e={},oe.RootPlaceIds,t.map(function(e){return B[e].placeId})),Xr(e,oe.UniverseIds,t.map(function(e){return B[e].universeId})),e),re(B,t)),{},(Xr(e={},oe.AbsPositions,t),Xr(e,oe.SortPos,u),Xr(e,oe.Page,ae.GamesPage),Xr(e,oe.NumberOfLoadedTiles,(B||[]).length),Xr(e,oe.GameSetTargetId,l.gameSetTargetId),Xr(e,oe.GameSetTypeId,d.gameSetTypeId),Xr(e,ie.DiscoverPageSessionInfo,Z),e))}},[B,Z,d.gameSetTypeId,l.gameSetTargetId,u]);xt(v,B.length,G);var X=(0,ee.useCallback)(function(e){b.current||(b.current=!0,e(),setTimeout(function(){b.current=!1},200))},[]);return te().createElement("div",{"data-testid":"game-carousel-carousel-container",className:"clearfix horizontal-scroll-window",ref:p},te().createElement("div",{className:"horizontally-scrollable",style:D,onScroll:C,ref:g},te().createElement("ul",{className:"hlist games game-cards game-tile-list",ref:v},0<K.length&&K.map(function(e,o){function t(e){var t=e.placeId,n=e.isSponsored,r=e.universeId,a=e.nativeAdData;return Xr(e={},oe.SortPos,u),Xr(e,oe.NumberOfLoadedTiles,(K||[]).length),Xr(e,oe.Page,ae.GamesPage),Xr(e,oe.GameSetTargetId,l.gameSetTargetId),Xr(e,oe.GameSetTypeId,d.gameSetTypeId),Xr(e,ie.DiscoverPageSessionInfo,Z),Xr(e,oe.Position,o),Xr(e,oe.IsAd,n),Xr(e,oe.PlaceId,t),Xr(e,oe.UniverseId,r),Xr(e,oe.NativeAdData,a),e}var n="".concat(null==e?void 0:e.universeId).concat(o);return c===cr.featureGameTile?te().createElement(Kr,$r({key:n,game:e,gameTileRef:y,ref:h,cursor:V,index:o,numGamesFitted:O,pageContext:s,sortName:i,sortPosition:u,buildEventProperties:t},f)):te().createElement("li",{className:"list-item game-card game-tile",id:null==e?void 0:e.universeId,key:n,ref:h,title:null==e?void 0:e.name},(null==e?void 0:e.universeId)&&te().createElement($n,$r({game:e,isHidden:!(V<=o&&o<=V+O-1),pageType:lr.gameCarousel,ref:y,index:o,sortName:i,pageContext:s,sortPosition:u,buildEventProperties:t},f)))}))),te().createElement(tr,$r({scrollClassNames:I.prev,scrollIconClassName:E,isDisabled:A.isPrevDisabled,scroll:function(){return X(t)}},f)),te().createElement(tr,$r({scrollClassNames:I.next,scrollIconClassName:e,isDisabled:A.isNextDisabled,scroll:function(){return X(J)}},f)))}ra.propTypes={gamesData:H().arrayOf(H().shape({universeId:H().number})).isRequired,loadMore:H().func.isRequired,name:H().string.isRequired,sortApiParams:H().shape({hasMoreRows:H().bool,gameSetTargetId:H().oneOfType([H().number,H().any])}).isRequired,pageContext:H().shape({pageId:H().string}).isRequired,sortPosition:H().number.isRequired,sortStyle:H().string.isRequired,sort:H().shape({gameSetTypeId:H().number}).isRequired,isInitializedLoading:H().bool.isRequired,translate:H().func.isRequired};var aa=ra;(q=te().forwardRef(function(e,t){var n=e.game,r=e.pageType,a=e.index,o=e.sortName,i=e.pageContext,l=e.sortPosition,s=e.dateTime,u=e.buildEventProperties,c=n.placeId,d=n.universeId,c=Vn(n,r,a,o,i,l,s,c,!0);n.referralUrl=c;c=u?X(n.placeId,n.name,u(n,a)):c;return te().createElement("div",{className:"featured-game-container game-card-container",ref:t},te().createElement(P.Link,{url:c,className:"game-card-link"},te().createElement("div",{className:"thumb-container"},te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.universeThumbnail,size:Ge.ThumbnailGameThumbnailSize.width576,targetId:d,imgClassName:"thumb",format:Ge.ThumbnailFormat.jpeg,altName:n.name}),te().createElement("div",{className:"thumb-mask"})),te().createElement("div",{className:"featured-game-icon-container"},te().createElement(Ge.Thumbnail2d,{type:Ge.ThumbnailTypes.gameIcon,size:Ge.DefaultThumbnailSize,targetId:d,containerClass:"brief-game-icon",format:Ge.ThumbnailFormat.jpeg,altName:n.name})),te().createElement("div",{className:"info-container"},te().createElement(An,{game:n}),n.isShowSponsoredLabel&&te().createElement(Fn,e),!n.isShowSponsoredLabel&&te().createElement(jn,{game:n}))))})).defaultProps={sortName:null,sortPosition:-1,pageContext:{pageId:null},dateTime:null,buildEventProperties:void 0},q.propTypes={game:H().shape({universeId:H().number,placeId:H().number,name:H().string,gameDescription:H().string,playerCount:H().number,isShowSponsoredLabel:H().bool,nativeAdData:H().string,referralUrl:H().string}).isRequired,pageType:H().string.isRequired,index:H().number.isRequired,buildEventProperties:H().func,sortName:H().string,pageContext:H().shape({pageId:H().string}),sortPosition:H().number,dateTime:H().string},q.displayName="FeatureGameTile";var oa=q;function ia(){return(ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function la(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ua(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function ca(e){var r=e.eventRef,t=e.gamesData,n=e.sort,a=e.isNumberRowsLimited,o=e.pageType,i=e.featureUniverseId,l=e.isDataFetching,s=e.sortPosition,u=e.pageContext,c=ua(e,["eventRef","gamesData","sort","isNumberRowsLimited","pageType","featureUniverseId","isDataFetching","sortPosition","pageContext"]),d=(0,ee.useRef)(),m=n.numberOfRows,f=n.name,e=la((0,ee.useState)({height:"auto"}),2),n=e[0],p=e[1];return(0,ee.useEffect)(function(){var e;a&&d.current&&(e=vr(d.current)+12,p({height:"".concat(e*m,"px")}))},[d,a,m]),te().createElement("div",{"data-testid":"game-grid-grid-container",className:"multi-row clearfix game-grid-container",style:n},t&&t.map(function(e,t){var n="".concat(e.universeId).concat(t);return e.universeId===i?te().createElement("li",{className:"featured-game-tile",key:n,title:null==e?void 0:e.name},te().createElement(oa,ia({game:e,pageType:o,index:t,sortName:f,sortPosition:s,pageContext:u},c,{ref:d}))):te().createElement("li",{ref:r,className:"game-card game-tile",key:n,title:null==e?void 0:e.name},te().createElement($n,ia({game:e,pageType:o,index:t,sortName:f,sortPosition:s,pageContext:u},c,{ref:d})))}),l?te().createElement(P.Loading,null):null)}ca.defaultProps={eventRef:void 0,gamesData:[],isNumberRowsLimited:!1,sort:{numberOfRows:1},featureUniverseId:0,isDataFetching:!1,sortPosition:-1,pageContext:{pageId:null}},ca.propTypes={eventRef:H().oneOfType([H().func,H().shape({current:H().instanceOf(Element)})]),gamesData:H().arrayOf(H().shape({universeId:H().number})),sort:H().shape({numberOfRows:H().number,name:H().string}),isNumberRowsLimited:H().bool,pageType:H().string.isRequired,featureUniverseId:H().number,isDataFetching:H().bool,sortPosition:H().number,pageContext:H().shape({pageId:H().string}),translate:H().func.isRequired};var da=ca;function ma(e){var t=e.translate,n=e.headerLabel,r=e.seeAllLink,e=e.isSeeAllHidden,e=ge()(Hn.seeAllClass,{hidden:e});return te().createElement("div",{"data-testid":"game-lists-game-container-header",className:"container-header games-filter-changer"},te().createElement("h2",null,te().createElement(m.NavLink,{to:r},n)),te().createElement(m.NavLink,{"data-testid":"game-lists-game-container-header-see-all-button",to:r,className:e},t(Hn.seeAllLinkLabel)))}ma.defaultProps={isSeeAllHidden:!1},ma.propTypes={translate:H().func.isRequired,headerLabel:H().string.isRequired,seeAllLink:H().string.isRequired,isSeeAllHidden:H().bool};var fa,pa,ga=ma;function va(){return(va=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ba(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ia(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function Sa(e){var t=e.sort,n=e.pageContext,r=e.sortPosition,a=e.sortStyle,o=e.timeFilters,i=Ia(e,["sort","pageContext","sortPosition","sortStyle","timeFilters"]),l=ha((0,ee.useState)([]),2),s=l[0],u=l[1],c=t.token,d=t.displayName,m=t.name,f=t.numberOfRows,p=t.gameSetTargetId,e=t.contextCountryRegionId,l=t.timeOptionsAvailable,e={sortToken:c,gameSetTargetId:p,startRows:wn.params.startRows,maxRows:a===cr.featureGameTile?mr:fr,hasMoreRows:!0,sortPosition:r,contextCountryRegionId:e};l&&(e.timeFilter=kn(o)),e["pageContext.pageId"]=null==n?void 0:n.pageId;function g(n,e){!(b||!v.hasMoreRows)&&(null==s?void 0:s.length)<=ur&&(e&&h(!0),I(!0),Rn(v).then(function(t){var e;!n&&null!=t&&t.games&&(u(function(e){return e.concat(t.games)}),e=Dn(t,v),y(e))},function(){n||y(function(e){return Object.assign(e,{hasMoreRows:!1})})}).finally(function(){!n&&e&&h(!1),n||I(!1)}))}var l=ha((0,ee.useState)(e),2),v=l[0],y=l[1],o=ha((0,ee.useState)(!1),2),e=o[0],h=o[1],l=ha((0,ee.useState)(!1),2),b=l[0],I=l[1],o=ne(ie.DiscoverPageSessionInfo);(0,ee.useEffect)(function(){return g(!1,!0),function(){}},[]);o=E((ya(l={},oe.Position,r),ya(l,oe.GameSetTypeId,t.gameSetTypeId),ya(l,oe.GameSetTargetId,t.gameSetTargetId),ya(l,oe.Page,ae.GamesPage),ya(l,oe.TreatmentType,pa.Carousel),ya(l,ie.DiscoverPageSessionInfo,o),l)),l="sortName/".concat(t.name).concat(o),o=ge()("games-list-container",{"is-windows":null===he.jsClientDeviceIdentifier||void 0===he.jsClientDeviceIdentifier?void 0:he.jsClientDeviceIdentifier.isWindows});return te().createElement("div",{"data-testid":"game-carousel-games-container",className:o},te().createElement(ga,va({headerLabel:d,seeAllLink:l},i)),e?te().createElement(P.Loading,null):null,0<s.length&&te().createElement("div",{className:ge()("horizontal-scroller games-list",{"large-tiles":a===cr.featureGameTile})},1===f&&te().createElement(aa,va({gamesData:s,name:m,loadMore:g,sortApiParams:v,pageContext:n,sortPosition:r,sortStyle:a,sort:t,isInitializedLoading:e},i)),1<f&&te().createElement(da,va({gamesData:s,pageType:lr.gameCarousel,isNumberRowsLimited:!0,sort:t,sortPosition:r,pageContext:n},i))))}(q={}).Melee="Melee",q.Ranged="Ranged",q.Explosive="Explosive",q.PowerUps="PowerUps",q.Navigation="Navigation",q.Music="Music",q.Social="Social",q.Building="Building",q.PersonalTransport="PersonalTransport",(q=fa=fa||{}).Home="Home",q.Games="Games",(pa=pa||{}).Carousel="Carousel",(q={}).Invalid="Invalid",q.HasLootBoxes="HasLootBoxes",q.HasInGameTrading="HasInGameTrading",q.IsUsingLootBoxApi="IsUsingLootBoxApi",q.IsUsingInGameTradingApi="IsUsingInGameTradingApi",q.HasAllowedExternalLinkReferences="HasAllowedExternalLinkReferences",q.IsUsingAllowedExternalLinkReferencesApi="IsUsingAllowedExternalLinkReferencesApi",(q={}).MorphToR6="MorphToR6",q.PlayerChoice="PlayerChoice",q.MorphToR15="MorphToR15",Sa.propTypes={sort:H().shape({token:H().string,displayName:H().string,name:H().string,numberOfRows:H().number,gameSetTargetId:H().number,gameSetTypeId:H().number,contextCountryRegionId:H().number,timeOptionsAvailable:H().bool,treatmentType:H().string}).isRequired,pageContext:H().shape({pageId:H().string}).isRequired,sortPosition:H().number.isRequired,sortStyle:H().string.isRequired,timeFilters:H().arrayOf(H().shape({token:H().string,name:H().string})).isRequired,translate:H().func.isRequired};var Pa=Sa;function Ea(){return(Ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ta(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Na(n){var e=n.translate,t=wa((0,ee.useState)([]),2),r=t[0],a=t[1],o=(t=wa((0,ee.useState)(""),2))[0],i=t[1],l=(t=wa((0,ee.useState)([]),2))[0],s=t[1],u=(t=wa((0,ee.useState)({}),2))[0],c=t[1];return ne(ie.DiscoverPageSessionInfo,!0),(0,ee.useEffect)(function(){var t=!0;return On(null,!0).then(function(e){t&&(c(null==e?void 0:e.pageContext),i(dr&&null!=e&&e.gameSortStyle?e.gameSortStyle:""),s(null==e?void 0:e.timeFilters),null!=e&&e.sorts&&a(e.sorts))},function(e){console.debug(e)}),function(){t=!1}},[]),te().createElement(ee.Fragment,null,te().createElement("div",{className:"section"},te().createElement("div",{className:"games-list-header"},te().createElement("h1",null,e("Label.Discover")))),0<r.length&&r.map(function(e,t){return te().createElement(Pa,Ea({sortPosition:t,sort:e,sortStyle:o,pageContext:u,timeFilters:l,key:e.token+e.displayName},n))}))}function xa(e){var t=e.translate,n=(0,ee.useState)(void 0),e=n[0],r=n[1];return(0,ee.useEffect)(function(){C(Aa.discoverPage,La.discoverPage).then(function(e){return r(!0===e.IsGamesOmniFeedEnabled)}).catch(function(){r(!1)})},[]),!0===e?te().createElement(hn,{translate:t}):!1===e?te().createElement(Na,{translate:t}):te().createElement(P.Loading,null)}function Ca(e){var a=e.sort,t=e.translate,n=(0,ee.useRef)(null),r=(0,ee.useRef)(null),o=(v=(0,ee.useState)(0))[0],i=v[1],l=(e=(0,ee.useState)({}))[0],s=e[1],u=(v=(0,ee.useState)(void 0))[0],c=v[1],d=(e=(0,ee.useState)(!0))[0],m=e[1],f=ne(ie.DiscoverPageSessionInfo),p=(0,ee.useCallback)(function(){return Ma(void 0,void 0,void 0,function(){var t,n,r;return Ua(this,function(e){switch(e.label){case 0:m(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Re(a.token,a.contextCountryRegionId,o,Le.numberOfGameTilesPerLoad,a.gameSetTargetId,l.nextPageExclusiveStartId)];case 2:return r=e.sent(),t=r.games,n=r.metaData,y().unstable_batchedUpdates(function(){c(Fa(Fa([],u||[]),t)),i(function(e){return e+Le.numberOfGameTilesPerLoad}),s(n)}),[3,4];case 3:return r=e.sent(),console.error(r),[3,4];case 4:return m(!1),[2]}})})},[o,l,u,a]),g=(0,ee.useCallback)(function(){var e=((null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0)+((null===(t=n.current)||void 0===t?void 0:t.clientHeight)||0),t=window.pageYOffset+window.innerHeight;e<t&&!1===(null==l?void 0:l.hasMoreRows)?window.removeEventListener("scroll",g):e<t&&!0===(null==l?void 0:l.hasMoreRows)&&!1===d&&p()},[null==l?void 0:l.hasMoreRows,p,d]),v=(0,ee.useCallback)(function(e){if(void 0!==u){var t=e.filter(function(e){return e<(null==u?void 0:u.length)});return ja(ja(((e={})[oe.RootPlaceIds]=t.map(function(e){return u[e].placeId}),e[oe.UniverseIds]=t.map(function(e){return u[e].universeId}),e[oe.AbsPositions]=t,e),re(u,t)),((t={})[oe.EmphasisFlag]=!1,t[oe.GameSetTypeId]=a.gameSetTypeId,t[oe.GameSetTargetId]=a.gameSetTargetId,t[oe.Page]=ae.SortDetailPageDiscover,t[ie.DiscoverPageSessionInfo]=f,t))}},[u,f,a.gameSetTargetId,a.gameSetTypeId]);return xt(n,null!==(e=null==u?void 0:u.length)&&void 0!==e?e:0,v),(0,ee.useEffect)(function(){return window.addEventListener("scroll",g),function(){window.removeEventListener("scroll",g)}},[g,a]),(0,ee.useEffect)(function(){c(void 0),p()},[a]),te().createElement(te().Fragment,null,te().createElement(mn,{ref:n,emphasis:!1,tileRef:r,gameData:u||[],translate:t,buildEventProperties:function(e,t){var n={};return n[oe.PlaceId]=e.placeId,n[oe.UniverseId]=e.universeId,n[oe.IsAd]=e.isSponsored,n[oe.NativeAdData]=e.nativeAdData,n[oe.Position]=t,n[oe.NumberOfLoadedTiles]=(u||[]).length,n[oe.GameSetTypeId]=a.gameSetTypeId,n[oe.GameSetTargetId]=a.gameSetTargetId,n[oe.Page]=ae.SortDetailPageDiscover,n[ie.DiscoverPageSessionInfo]=f,n}}),d&&te().createElement(P.Loading,null))}function Oa(r,a,o){return Ha(void 0,void 0,Promise,function(){var t,n;return Va(this,function(e){switch(e.label){case 0:t=null;try{t=U.localStorageService.getLocalStorage(r)}catch(e){t=null}return null!==t&&t.userId===p.CurrentUser.userId&&o(t)?[2,t.data]:[4,a()];case 1:return n=e.sent(),U.localStorageService.setLocalStorage(r,{data:n,userId:p.CurrentUser.userId||"guest",time:(new Date).getTime()}),[2,n]}})})}function Ra(e){var t=e.sortName,n=e.translate,r=(0,ee.useRef)(null),a=(0,ee.useRef)(null),o=(p=(0,ee.useState)(void 0))[0],i=p[1],l=(0,ee.useState)(!1),s=l[0],u=l[1],c=(0,ee.useState)(!1),e=c[0],d=c[1],m=M(ie.DiscoverPageSessionInfo),f=(0,ee.useCallback)(function(e){d(!1),u(!0),k(m,t,e).then(Ht).then(function(t){i(e?function(e){return e&&Xa(Xa({},e),{games:eo(eo([],e.games),t.games),nextPageToken:t.nextPageToken})}:t)}).catch(function(){d(!0)}).finally(function(){u(!1)})},[t,m]),p=(0,ee.useCallback)(function(){null!=o&&o.nextPageToken&&!s&&f(null==o?void 0:o.nextPageToken)},[f,s,null==o?void 0:o.nextPageToken]);return(0,ee.useEffect)(function(){f()},[f]),l=(0,ee.useCallback)(function(e){if(void 0!==(null==o?void 0:o.games)){var t=e.filter(function(e){return e<o.games.length});return Xa(Xa(Xa(Xa(((e={})[oe.RootPlaceIds]=t.map(function(e){return o.games[e].placeId}),e[oe.UniverseIds]=t.map(function(e){return o.games[e].universeId}),e[oe.AbsPositions]=t,e),re(o.games,t)),((t={})[oe.EmphasisFlag]=!1,t[oe.GameSetTypeId]=null==o?void 0:o.topicId,t)),qt(o)),((t={})[oe.Page]=ae.SortDetailPageDiscover,t[ie.DiscoverPageSessionInfo]=m,t))}},[o,m]),xt(r,null!==(c=null===(c=null==o?void 0:o.games)||void 0===c?void 0:c.length)&&void 0!==c?c:0,l),e&&!o?te().createElement("div",{className:"game-sort-detail-container"},te().createElement("h1",null,n(fe.LabelGames)),te().createElement("div",{className:"game-sort-detail"},te().createElement(ye,{errorMessage:n(fe.LabelApiError),onRefresh:function(){return f()}}))):void 0===o?te().createElement(P.Loading,null):te().createElement("div",{className:"game-sort-detail-container"},te().createElement("h1",null,o.topic),te().createElement(fn,{ref:r,emphasis:!1,tileRef:a,gameData:o.games,translate:n,buildEventProperties:function(e,t){var n;return Xa(Xa(((n={})[oe.PlaceId]=e.placeId,n[oe.UniverseId]=e.universeId,n[oe.IsAd]=e.isSponsored,n[oe.NativeAdData]=e.nativeAdData,n[oe.Position]=t,n[oe.NumberOfLoadedTiles]=((null==o?void 0:o.games)||[]).length,n[oe.GameSetTypeId]=null==o?void 0:o.topicId,n),qt(o)),((n={})[oe.Page]=ae.SortDetailPageDiscover,n[ie.DiscoverPageSessionInfo]=m,n))},shouldUseSentinelTile:!e,loadData:p}),s&&te().createElement(P.Loading,null))}function Da(e){var t=e.translate,n=ro(e,["translate"]),r=(0,ee.useState)(void 0),e=r[0],a=r[1];return(0,ee.useEffect)(function(){C(ao.discoverPage,oo.discoverPage).then(function(e){return a(!0===e.IsGamesOmniFeedEnabled)}).catch(function(){a(!1)})},[]),!0===e?te().createElement(to,no({translate:t},n)):!1===e?te().createElement(Za,no({translate:t},n)):te().createElement(P.Loading,null)}function ka(e){var r=e.sort,t=e.translate,a=e.homePageSessionInfo,n=(0,ee.useRef)(null),o=(0,ee.useRef)(null),i=(f=(0,ee.useState)(void 0))[0],l=f[1],s=(e=(0,ee.useState)(!0))[0],u=e[1],c=(0,ee.useCallback)(function(){return(i||[]).length<r.recommendationList.length},[i,r]),d=(0,ee.useCallback)(function(){return lo(void 0,void 0,void 0,function(){var n,t;return so(this,function(e){switch(e.label){case 0:u(!0),t=(i||[]).length,t=r.recommendationList.slice(t,t+Le.numberOfGameTilesPerLoad),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,R(t,a)];case 2:return n=e.sent().contentMetadata,l(uo(uo([],i||[]),t.map(function(e){var t=n[e.contentType][e.contentId];return t.nativeAdData=e.contentMetadata.EncryptedAdTrackingData,t.isSponsored=0<(null===(e=t.nativeAdData)||void 0===e?void 0:e.length),t}))),[3,4];case 3:return t=e.sent(),console.error(t),[3,4];case 4:return u(!1),[2]}})})},[i,r]),m=(0,ee.useCallback)(function(){var e=((null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0)+((null===(t=n.current)||void 0===t?void 0:t.clientHeight)||0),t=window.pageYOffset+window.innerHeight;e<t&&!c()?window.removeEventListener("scroll",m):e<t&&c()&&!1===s&&d()},[c,d,s]),f=(0,ee.useCallback)(function(e){if(void 0!==i){var t=e.filter(function(e){return e<(null==i?void 0:i.length)});return io(io(((e={})[oe.RootPlaceIds]=t.map(function(e){return i[e].placeId}),e[oe.UniverseIds]=t.map(function(e){return i[e].universeId}),e[oe.AbsPositions]=t,e),re(i,t)),((t={})[oe.GameSetTypeId]=r.topicId,t[oe.EmphasisFlag]=!1,t[oe.Page]=ae.SortDetailPageHome,t[ie.HomePageSessionInfo]=a,t))}},[i,a,r.topicId]);return xt(n,null!==(e=null==i?void 0:i.length)&&void 0!==e?e:0,f),(0,ee.useEffect)(function(){return window.addEventListener("scroll",m),function(){window.removeEventListener("scroll",m)}},[m,r]),(0,ee.useEffect)(function(){l(void 0),d()},[r]),te().createElement(te().Fragment,null,te().createElement(mn,{ref:n,emphasis:!1,tileRef:o,gameData:i||[],translate:t,buildEventProperties:function(e,t){return{placeId:e.placeId,universeId:e.universeId,isAd:null!=r.recommendationList[t].contentMetadata.EncryptedAdTrackingData,nativeAdData:r.recommendationList[t].contentMetadata.EncryptedAdTrackingData,position:t,numberOfLoadedTiles:(i||[]).length,gameSetTypeId:r.topicId,homePageSessionInfo:a,page:ae.SortDetailPageHome}}}),s&&te().createElement(P.Loading,null))}function Ga(e){var t=e.match,n=decodeURIComponent(t.params.sortName),e=(0,m.useLocation)(),t=(0,m.useHistory)();return Ka(de.sortDetailReferral,[oe.Position,oe.SortId,oe.Page,oe.TreatmentType,ie.HomePageSessionInfo],[],{},e,t),te().createElement(fo,{sortName:n})}var Aa=s,La=l,ja=function(){return(ja=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Ma=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},Ua=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Fa=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},Ha=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},Va=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},qa=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},Ba=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},za="gameSort",_a=function(){return qa(void 0,void 0,void 0,function(){return Ba(this,function(e){return[2,Oa(za,De,function(e){return e.time+e.data.sorts[0].tokenExpiryInSeconds>(new Date).getTime()})]})})},Wa=function(){return(Wa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Ya=z.parseQueryString,Qa=z.composeQueryString,Ka=function(r,a,o,i,l,s){void 0===i&&(i={}),void 0===l&&(l=window.location),void 0===s&&(s=window.history);var e=(0,ee.useState)(Ya(l.search)),t=e[0],u=e[1];return(0,ee.useEffect)(function(){var n,e,t;n=Ya(l.search),e=a.reduce(function(e,t){return void 0===n[t]&&null===n[t]||(e[t]=n[t]),e},{}),!(t=o.reduce(function(e,t){return void 0===n[t]&&null===n[t]||(e[t]=n[t]),e},{})).launchData&&t.placeId&&delete t.placeId,u(e),L(e),void 0!==s.replace&&s.replace(""+l.pathname+Qa(t)),void 0!==s.replaceState&&s.replaceState(void 0,"",""+l.pathname+l.hash+Qa(t)),U.eventStreamService.sendEvent.apply(U.eventStreamService,r(Wa(Wa({},e),i)))},[]),t},$a=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},Ja=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Za=(0,t.withTranslations)(function(e){var t=e.match,n=e.translate,r=(0,m.useLocation)(),a=(0,m.useHistory)(),o=decodeURIComponent(t.params.sortName),i=(0,ee.useState)(void 0),l=i[0],s=i[1],e=(0,ee.useState)(!1),t=e[0],u=e[1],i=(0,ee.useState)(!1),e=i[0],c=i[1];Ka(de.sortDetailReferral,[oe.Position,oe.GameSetTargetId,oe.GameSetTypeId,oe.SortId,oe.Page,oe.TreatmentType,ie.DiscoverPageSessionInfo],[],{},r,a);function d(){return $a(void 0,void 0,void 0,function(){var t;return Ja(this,function(e){switch(e.label){case 0:c(!1),s(void 0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,_a()];case 2:return t=e.sent().sorts,void 0===(t=t.find(function(e){return e.name===o}))?u(!0):s(t),[3,4];case 3:return e.sent(),c(!0),[3,4];case 4:return[2]}})})}return(0,ee.useEffect)(function(){d()},[o]),e?te().createElement("div",{className:"game-sort-detail-container"},te().createElement("h1",null,n(fe.LabelGames)),te().createElement("div",{className:"game-sort-detail"},te().createElement(ye,{errorMessage:n(fe.LabelApiError),onRefresh:d}))):t?te().createElement(m.Redirect,{to:"/"}):l?te().createElement("div",{className:"game-sort-detail-container"},te().createElement("h1",null,l.displayName),te().createElement(Ca,{sort:l,translate:n})):te().createElement(P.Loading,null)},a),Xa=function(){return(Xa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},eo=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},to=(0,t.withTranslations)(function(e){var t=e.match,n=e.translate,r=(0,m.useLocation)(),e=(0,m.useHistory)(),t=decodeURIComponent(t.params.sortName);return Ka(de.sortDetailReferral,[oe.Position,oe.GameSetTargetId,oe.GameSetTypeId,oe.Page,oe.TreatmentType,ie.DiscoverPageSessionInfo],[],{},r,e),te().createElement(Ra,{sortName:t,translate:n})},a),no=function(){return(no=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ro=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},ao=s,oo=l,io=function(){return(io=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},lo=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},so=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},uo=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},co=function(e,i,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}o((s=s.apply(e,i||[])).next())})},mo=function(n,r){var a,o,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,o=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(i=0<(i=l.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){l.label=t[1];break}if(6===t[0]&&l.label<i[1]){l.label=i[1],i=t;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(t);break}i[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},fo=(0,t.withTranslations)(function(e){function t(){return co(void 0,void 0,void 0,function(){var t;return mo(this,function(e){switch(e.label){case 0:c(!1),i(void 0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,O(fa.Home,l)];case 2:return t=e.sent(),void 0===(t=t.sorts.find(function(e){return e.topic===n}))?u(!0):i(t),[3,4];case 3:return e.sent(),c(!0),[3,4];case 4:return[2]}})})}var n=e.sortName,r=e.translate,a=(0,ee.useState)(void 0),o=a[0],i=a[1],l=ne(ie.HomePageSessionInfo),s=(0,ee.useState)(!1),e=s[0],u=s[1],a=(0,ee.useState)(!1),s=a[0],c=a[1];return(0,ee.useEffect)(function(){t()},[n]),s?te().createElement("div",{className:"game-sort-detail-container"},te().createElement("h1",null,r(fe.LabelGames)),te().createElement("div",{className:"game-sort-detail"},te().createElement(ye,{errorMessage:r(fe.LabelApiError),onRefresh:t}))):e?te().createElement(m.Redirect,{to:"/"}):o?te().createElement("div",{className:"game-sort-detail-container"},te().createElement("h1",null,n),te().createElement(ka,{homePageSessionInfo:l,sort:o,translate:r})):te().createElement(P.Loading,null)},a),po=(0,t.withTranslations)(function(e){return te().createElement(m.HashRouter,null,te().createElement(m.Route,{exact:!0,path:"/",render:function(){return te().createElement(xa,e)}}),te().createElement(m.Route,{exact:!0,path:"/sortName/:sortName",component:Da}),te().createElement(m.Route,{exact:!0,path:"/sortName/v2/:sortName",component:Ga}))},r);(0,d.ready)(function(){(0,e.render)(te().createElement(po,null),document.getElementById("games-carousel-page"))})}()}();
//# sourceMappingURL=https://js.rbxcdn.com/dada17119134eb63befadc7797365eb2-gameCarousel.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("GameCarousel");